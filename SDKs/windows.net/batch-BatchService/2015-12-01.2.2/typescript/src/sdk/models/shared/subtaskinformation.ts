/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { SpeakeasyBase, SpeakeasyMetadata } from "../../../internal/utils";
import { ComputeNodeInformation } from "./computenodeinformation";
import { TaskSchedulingError } from "./taskschedulingerror";
import { Expose, Transform, Type } from "class-transformer";

/**
 * Gets or sets the previous state of the subtask. This property is not set if the subtask is in its initial Active state.
 */
export enum SubtaskInformationPreviousStateEnum {
  Active = "active",
  Preparing = "preparing",
  Running = "running",
  Completed = "completed",
}

/**
 * Gets or sets the current state of the subtask.
 */
export enum SubtaskInformationStateEnum {
  Active = "active",
  Preparing = "preparing",
  Running = "running",
  Completed = "completed",
}

/**
 * Information about an Azure Batch subtask.
 */
export class SubtaskInformation extends SpeakeasyBase {
  /**
   * Gets or sets the time at which the subtask completed. This property is set only if the subtask is in the Completed state.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "endTime" })
  @Transform(({ value }) => new Date(value), { toClassOnly: true })
  endTime?: Date;

  /**
   * Gets or sets the exit code of the subtask. This property is set only if the subtask is in the Completed state.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "exitCode" })
  exitCode?: number;

  /**
   * Gets or sets the id of the subtask.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "id" })
  id?: number;

  /**
   * Information about the compute node on which a task ran.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "nodeInfo" })
  @Type(() => ComputeNodeInformation)
  nodeInfo?: ComputeNodeInformation;

  /**
   * Gets or sets the previous state of the subtask. This property is not set if the subtask is in its initial Active state.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "previousState" })
  previousState?: SubtaskInformationPreviousStateEnum;

  /**
   * Gets or sets the time at which the subtask entered its previous state. This property is not set if the subtask is in its initial Active state.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "previousStateTransitionTime" })
  @Transform(({ value }) => new Date(value), { toClassOnly: true })
  previousStateTransitionTime?: Date;

  /**
   * Information about an error when scheduling a task.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "schedulingError" })
  @Type(() => TaskSchedulingError)
  schedulingError?: TaskSchedulingError;

  /**
   * Gets or sets the time at which the subtask started running. If the subtask has been restarted or retried, this is the most recent time at which the subtask started running.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "startTime" })
  @Transform(({ value }) => new Date(value), { toClassOnly: true })
  startTime?: Date;

  /**
   * Gets or sets the current state of the subtask.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "state" })
  state?: SubtaskInformationStateEnum;

  /**
   * Gets or sets the time at which the subtask entered its current state.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "stateTransitionTime" })
  @Transform(({ value }) => new Date(value), { toClassOnly: true })
  stateTransitionTime?: Date;
}
