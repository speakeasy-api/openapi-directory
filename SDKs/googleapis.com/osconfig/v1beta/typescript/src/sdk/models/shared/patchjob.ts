/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { SpeakeasyBase, SpeakeasyMetadata } from "../../../internal/utils";
import { PatchConfig } from "./patchconfig";
import { PatchInstanceFilter } from "./patchinstancefilter";
import { PatchJobInstanceDetailsSummary } from "./patchjobinstancedetailssummary";
import { PatchRollout } from "./patchrollout";
import { Expose, Type } from "class-transformer";

/**
 * The current state of the PatchJob.
 */
export enum PatchJobStateEnum {
  StateUnspecified = "STATE_UNSPECIFIED",
  Started = "STARTED",
  InstanceLookup = "INSTANCE_LOOKUP",
  Patching = "PATCHING",
  Succeeded = "SUCCEEDED",
  CompletedWithErrors = "COMPLETED_WITH_ERRORS",
  Canceled = "CANCELED",
  TimedOut = "TIMED_OUT",
}

/**
 * A high level representation of a patch job that is either in progress or has completed. Instance details are not included in the job. To paginate through instance details, use `ListPatchJobInstanceDetails`. For more information about patch jobs, see [Creating patch jobs](https://cloud.google.com/compute/docs/os-patch-management/create-patch-job).
 */
export class PatchJob extends SpeakeasyBase {
  /**
   * Time this patch job was created.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "createTime" })
  createTime?: string;

  /**
   * Description of the patch job. Length of the description is limited to 1024 characters.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "description" })
  description?: string;

  /**
   * Display name for this patch job. This is not a unique identifier.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "displayName" })
  displayName?: string;

  /**
   * If this patch job is a dry run, the agent reports that it has finished without running any updates on the VM instance.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "dryRun" })
  dryRun?: boolean;

  /**
   * Duration of the patch job. After the duration ends, the patch job times out.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "duration" })
  duration?: string;

  /**
   * If this patch job failed, this message provides information about the failure.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "errorMessage" })
  errorMessage?: string;

  /**
   * A summary of the current patch state across all instances that this patch job affects. Contains counts of instances in different states. These states map to `InstancePatchState`. List patch job instance details to see the specific states of each instance.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "instanceDetailsSummary" })
  @Type(() => PatchJobInstanceDetailsSummary)
  instanceDetailsSummary?: PatchJobInstanceDetailsSummary;

  /**
   * A filter to target VM instances for patching. The targeted VMs must meet all criteria specified. So if both labels and zones are specified, the patch job targets only VMs with those labels and in those zones.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "instanceFilter" })
  @Type(() => PatchInstanceFilter)
  instanceFilter?: PatchInstanceFilter;

  /**
   * Unique identifier for this patch job in the form `projects/* /patchJobs/*`
   */
  @SpeakeasyMetadata()
  @Expose({ name: "name" })
  name?: string;

  /**
   * Patch configuration specifications. Contains details on how to apply the patch(es) to a VM instance.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "patchConfig" })
  @Type(() => PatchConfig)
  patchConfig?: PatchConfig;

  /**
   * Output only. Name of the patch deployment that created this patch job.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "patchDeployment" })
  patchDeployment?: string;

  /**
   * Reflects the overall progress of the patch job in the range of 0.0 being no progress to 100.0 being complete.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "percentComplete" })
  percentComplete?: number;

  /**
   * Patch rollout configuration specifications. Contains details on the concurrency control when applying patch(es) to all targeted VMs.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "rollout" })
  @Type(() => PatchRollout)
  rollout?: PatchRollout;

  /**
   * The current state of the PatchJob.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "state" })
  state?: PatchJobStateEnum;

  /**
   * Last time this patch job was updated.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "updateTime" })
  updateTime?: string;
}
