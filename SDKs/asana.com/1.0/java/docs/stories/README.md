# stories

## Overview

*See [our forum post](https://forum.asana.com/t/no-more-parsing-story-text-new-fields-on-stories/42924) for more info on when conditional fields are returned.*

A story represents an activity associated with an object in the Asana system. Stories are generated by the system whenever users take actions such as creating or assigning tasks, or moving tasks between projects. "Comments" are also a form of user-generated story.

### Available Operations

* [createStoryForTask](#createstoryfortask) - Create a story on a task
* [deleteStory](#deletestory) - Delete a story
* [getStoriesForTask](#getstoriesfortask) - Get stories from a task
* [getStory](#getstory) - Get a story
* [updateStory](#updatestory) - Update a story

## createStoryForTask

Adds a story to a task. This endpoint currently only allows for comment
stories to be created. The comment will be authored by the currently
authenticated user, and timestamped when the server receives the request.

Returns the full record for the new story added to the task.

### Example Usage

```java
package hello.world;

import org.openapis.openapi.SDK;
import org.openapis.openapi.models.operations.CreateStoryForTaskRequest;
import org.openapis.openapi.models.operations.CreateStoryForTaskRequestBodyInput;
import org.openapis.openapi.models.operations.CreateStoryForTaskResponse;
import org.openapis.openapi.models.shared.Security;
import org.openapis.openapi.models.shared.StoryRequestInput;
import org.openapis.openapi.models.shared.StoryRequestStickerNameEnum;

public class Application {
    public static void main(String[] args) {
        try {
            SDK sdk = SDK.builder()
                .setSecurity(new Security() {{
                    oauth2 = "Bearer YOUR_ACCESS_TOKEN_HERE";
                }})
                .build();

            CreateStoryForTaskRequest req = new CreateStoryForTaskRequest(                new CreateStoryForTaskRequestBodyInput() {{
                                data = new StoryRequestInput() {{
                                    htmlText = "<body>This is a comment.</body>";
                                    isPinned = false;
                                    stickerName = StoryRequestStickerNameEnum.DANCING_UNICORN;
                                    text = "This is a comment.";
                                }};;
                            }};, "dolor") {{
                optFields = new String[]{{
                    add("quasi"),
                    add("ex"),
                    add("nulla"),
                    add("excepturi"),
                }};
                optPretty = false;
            }};            

            CreateStoryForTaskResponse res = sdk.stories.createStoryForTask(req);

            if (res.createStoryForTask201ApplicationJSONObject != null) {
                // handle response
            }
        } catch (Exception e) {
            // handle exception
        }
    }
}
```

## deleteStory

Deletes a story. A user can only delete stories they have created.

Returns an empty data record.

### Example Usage

```java
package hello.world;

import org.openapis.openapi.SDK;
import org.openapis.openapi.models.operations.DeleteStoryRequest;
import org.openapis.openapi.models.operations.DeleteStoryResponse;
import org.openapis.openapi.models.shared.Security;

public class Application {
    public static void main(String[] args) {
        try {
            SDK sdk = SDK.builder()
                .setSecurity(new Security() {{
                    oauth2 = "Bearer YOUR_ACCESS_TOKEN_HERE";
                }})
                .build();

            DeleteStoryRequest req = new DeleteStoryRequest("voluptatibus") {{
                optFields = new String[]{{
                    add("sapiente"),
                    add("quisquam"),
                }};
                optPretty = false;
            }};            

            DeleteStoryResponse res = sdk.stories.deleteStory(req);

            if (res.deleteStory200ApplicationJSONObject != null) {
                // handle response
            }
        } catch (Exception e) {
            // handle exception
        }
    }
}
```

## getStoriesForTask

Returns the compact records for all stories on the task.

### Example Usage

```java
package hello.world;

import org.openapis.openapi.SDK;
import org.openapis.openapi.models.operations.GetStoriesForTaskRequest;
import org.openapis.openapi.models.operations.GetStoriesForTaskResponse;
import org.openapis.openapi.models.shared.Security;

public class Application {
    public static void main(String[] args) {
        try {
            SDK sdk = SDK.builder()
                .setSecurity(new Security() {{
                    oauth2 = "Bearer YOUR_ACCESS_TOKEN_HERE";
                }})
                .build();

            GetStoriesForTaskRequest req = new GetStoriesForTaskRequest("saepe") {{
                limit = 411372L;
                offset = "impedit";
                optFields = new String[]{{
                    add("veniam"),
                    add("aliquid"),
                }};
                optPretty = false;
            }};            

            GetStoriesForTaskResponse res = sdk.stories.getStoriesForTask(req);

            if (res.getStoriesForTask200ApplicationJSONObject != null) {
                // handle response
            }
        } catch (Exception e) {
            // handle exception
        }
    }
}
```

## getStory

Returns the full record for a single story.

### Example Usage

```java
package hello.world;

import org.openapis.openapi.SDK;
import org.openapis.openapi.models.operations.GetStoryRequest;
import org.openapis.openapi.models.operations.GetStoryResponse;
import org.openapis.openapi.models.shared.Security;

public class Application {
    public static void main(String[] args) {
        try {
            SDK sdk = SDK.builder()
                .setSecurity(new Security() {{
                    oauth2 = "Bearer YOUR_ACCESS_TOKEN_HERE";
                }})
                .build();

            GetStoryRequest req = new GetStoryRequest("inventore") {{
                limit = 301831L;
                offset = "ea";
                optFields = new String[]{{
                    add("consectetur"),
                    add("recusandae"),
                    add("aspernatur"),
                    add("minima"),
                }};
                optPretty = false;
            }};            

            GetStoryResponse res = sdk.stories.getStory(req);

            if (res.getStory200ApplicationJSONObject != null) {
                // handle response
            }
        } catch (Exception e) {
            // handle exception
        }
    }
}
```

## updateStory

Updates the story and returns the full record for the updated story. Only comment stories can have their text updated, and only comment stories and attachment stories can be pinned. Only one of `text` and `html_text` can be specified.

### Example Usage

```java
package hello.world;

import org.openapis.openapi.SDK;
import org.openapis.openapi.models.operations.UpdateStoryRequest;
import org.openapis.openapi.models.operations.UpdateStoryRequestBodyInput;
import org.openapis.openapi.models.operations.UpdateStoryResponse;
import org.openapis.openapi.models.shared.Security;
import org.openapis.openapi.models.shared.StoryRequestInput;
import org.openapis.openapi.models.shared.StoryRequestStickerNameEnum;

public class Application {
    public static void main(String[] args) {
        try {
            SDK sdk = SDK.builder()
                .setSecurity(new Security() {{
                    oauth2 = "Bearer YOUR_ACCESS_TOKEN_HERE";
                }})
                .build();

            UpdateStoryRequest req = new UpdateStoryRequest(                new UpdateStoryRequestBodyInput() {{
                                data = new StoryRequestInput() {{
                                    htmlText = "<body>This is a comment.</body>";
                                    isPinned = false;
                                    stickerName = StoryRequestStickerNameEnum.DANCING_UNICORN;
                                    text = "This is a comment.";
                                }};;
                            }};, "eaque") {{
                optFields = new String[]{{
                    add("libero"),
                    add("aut"),
                    add("aut"),
                    add("deleniti"),
                }};
                optPretty = false;
            }};            

            UpdateStoryResponse res = sdk.stories.updateStory(req);

            if (res.updateStory200ApplicationJSONObject != null) {
                // handle response
            }
        } catch (Exception e) {
            // handle exception
        }
    }
}
```
