// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package operations

import (
	"bytes"
	"encoding/json"
	"errors"
	"net/http"
	"openapi/pkg/models/shared"
)

type PostMatrixRequestBodyType string

const (
	PostMatrixRequestBodyTypeMatrixRequest            PostMatrixRequestBodyType = "MatrixRequest"
	PostMatrixRequestBodyTypeSymmetricalMatrixRequest PostMatrixRequestBodyType = "SymmetricalMatrixRequest"
)

type PostMatrixRequestBody struct {
	MatrixRequest            *shared.MatrixRequest
	SymmetricalMatrixRequest *shared.SymmetricalMatrixRequest

	Type PostMatrixRequestBodyType
}

func CreatePostMatrixRequestBodyMatrixRequest(matrixRequest shared.MatrixRequest) PostMatrixRequestBody {
	typ := PostMatrixRequestBodyTypeMatrixRequest

	return PostMatrixRequestBody{
		MatrixRequest: &matrixRequest,
		Type:          typ,
	}
}

func CreatePostMatrixRequestBodySymmetricalMatrixRequest(symmetricalMatrixRequest shared.SymmetricalMatrixRequest) PostMatrixRequestBody {
	typ := PostMatrixRequestBodyTypeSymmetricalMatrixRequest

	return PostMatrixRequestBody{
		SymmetricalMatrixRequest: &symmetricalMatrixRequest,
		Type:                     typ,
	}
}

func (u *PostMatrixRequestBody) UnmarshalJSON(data []byte) error {
	var d *json.Decoder

	matrixRequest := new(shared.MatrixRequest)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&matrixRequest); err == nil {
		u.MatrixRequest = matrixRequest
		u.Type = PostMatrixRequestBodyTypeMatrixRequest
		return nil
	}

	symmetricalMatrixRequest := new(shared.SymmetricalMatrixRequest)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&symmetricalMatrixRequest); err == nil {
		u.SymmetricalMatrixRequest = symmetricalMatrixRequest
		u.Type = PostMatrixRequestBodyTypeSymmetricalMatrixRequest
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u PostMatrixRequestBody) MarshalJSON() ([]byte, error) {
	if u.MatrixRequest != nil {
		return json.Marshal(u.MatrixRequest)
	}

	if u.SymmetricalMatrixRequest != nil {
		return json.Marshal(u.SymmetricalMatrixRequest)
	}

	return nil, nil
}

type PostMatrixResponse struct {
	ContentType string
	// Unexpected Error
	GHError *shared.GHError
	Headers map[string][]string
	// Matrix API response
	MatrixResponse *shared.MatrixResponse
	StatusCode     int
	RawResponse    *http.Response
}
