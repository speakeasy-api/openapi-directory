/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import {
  objectToClass,
  SpeakeasyBase,
  SpeakeasyMetadata,
} from "../../../internal/utils";
import { Amount } from "./amount";
import { AuthenticationObject } from "./authenticationobject";
import { HrefType } from "./hreftype";
import { ScaStatusEnum } from "./scastatusenum";
import { Expose, Transform, Type } from "class-transformer";

/**
 * Body of the JSON response for a successful update PSU identification request.
 */
export class UpdatePsuIdenticationResponse extends SpeakeasyBase {
  /**
   * A list of hyperlinks to be recognised by the TPP. The actual hyperlinks used in the response depend on the dynamical decisions of the ASPSP when processing the request.
   *
   * @remarks
   *
   * **Remark:** All links can be relative or full links, to be decided by the ASPSP.
   *
   * Type of links admitted in this response, (further links might be added for ASPSP
   * defined extensions):
   *
   * - 'scaStatus': The link to retrieve the scaStatus of the corresponding authorisation sub-resource.
   * - 'selectAuthenticationMethod': This is a link to a resource, where the TPP can select the applicable second factor authentication methods for the PSU, if there are several available authentication methods and if the PSU is already sufficiently authenticated.. If this link is contained, then there is also the data element "scaMethods" contained in the response body.
   *
   */
  @SpeakeasyMetadata({ elemType: HrefType })
  @Expose({ name: "_links" })
  @Transform(
    ({ value }) => {
      const obj: Record<string, HrefType> = {};
      for (const key in value) {
        obj[key] = objectToClass(value[key], HrefType);
      }
      return obj;
    },
    { toClassOnly: true }
  )
  links: Record<string, HrefType>;

  @SpeakeasyMetadata()
  @Expose({ name: "currencyConversionFees" })
  @Type(() => Amount)
  currencyConversionFees?: Amount;

  @SpeakeasyMetadata()
  @Expose({ name: "estimatedInterbankSettlementAmount" })
  @Type(() => Amount)
  estimatedInterbankSettlementAmount?: Amount;

  @SpeakeasyMetadata()
  @Expose({ name: "estimatedTotalAmount" })
  @Type(() => Amount)
  estimatedTotalAmount?: Amount;

  /**
   * Text to be displayed to the PSU.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "psuMessage" })
  psuMessage?: string;

  /**
   * This data element might be contained, if SCA is required and if the PSU has a choice between different
   *
   * @remarks
   * authentication methods.
   *
   * Depending on the risk management of the ASPSP this choice might be offered before or after the PSU
   * has been identified with the first relevant factor, or if an access token is transported.
   *
   * If this data element is contained, then there is also a hyperlink of type 'startAuthorisationWithAuthenticationMethodSelection'
   * contained in the response body.
   *
   * These methods shall be presented towards the PSU for selection by the TPP.
   *
   */
  @SpeakeasyMetadata({ elemType: AuthenticationObject })
  @Expose({ name: "scaMethods" })
  @Type(() => AuthenticationObject)
  scaMethods?: AuthenticationObject[];

  /**
   * This data element is containing information about the status of the SCA method applied.
   *
   * @remarks
   *
   * The following codes are defined for this data type.
   *
   *   * 'received':
   *     An authorisation or cancellation-authorisation resource has been created successfully.
   *   * 'psuIdentified':
   *     The PSU related to the authorisation or cancellation-authorisation resource has been identified.
   *   * 'psuAuthenticated':
   *     The PSU related to the authorisation or cancellation-authorisation resource has been identified and authenticated e.g. by a password or by an access token.
   *   * 'scaMethodSelected':
   *     The PSU/TPP has selected the related SCA routine.
   *     If the SCA method is chosen implicitly since only one SCA method is available,
   *     then this is the first status to be reported instead of 'received'.
   *   * 'unconfirmed':
   *     SCA is technically successfully finalised by the PSU, but the authorisation resource needs a confirmation command by the TPP yet.
   *   * 'started':
   *     The addressed SCA routine has been started.
   *   * 'finalised':
   *     The SCA routine has been finalised successfully (including a potential confirmation command).
   *     This is a final status of the authorisation resource.
   *   * 'failed':
   *     The SCA routine failed.
   *     This is a final status of the authorisation resource.
   *   * 'exempted':
   *     SCA was exempted for the related transaction, the related authorisation is successful.
   *     This is a final status of the authorisation resource.
   *
   */
  @SpeakeasyMetadata()
  @Expose({ name: "scaStatus" })
  scaStatus: ScaStatusEnum;

  @SpeakeasyMetadata()
  @Expose({ name: "transactionFees" })
  @Type(() => Amount)
  transactionFees?: Amount;
}
