// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package sdk

import (
	"context"
	"fmt"
	"net/http"
	"openapi/pkg/models/operations"
	"openapi/pkg/models/shared"
	"openapi/pkg/utils"
	"strings"
)

// efiling - Efiling endpoints provide real-time campaign finance data received from electronic filers. Efiling endpoints only contain the most recent four months of data and don't contain the processed and coded data that you can find on other endpoints.
type efiling struct {
	defaultClient  HTTPClient
	securityClient HTTPClient
	serverURL      string
	language       string
	sdkVersion     string
	genVersion     string
}

func newEfiling(defaultClient, securityClient HTTPClient, serverURL, language, sdkVersion, genVersion string) *efiling {
	return &efiling{
		defaultClient:  defaultClient,
		securityClient: securityClient,
		serverURL:      serverURL,
		language:       language,
		sdkVersion:     sdkVersion,
		genVersion:     genVersion,
	}
}

// GetEfileFilings - Basic information about electronic files coming into the FEC, posted as they are received.
func (s *efiling) GetEfileFilings(ctx context.Context, request operations.GetEfileFilingsRequest) (*operations.GetEfileFilingsResponse, error) {
	baseURL := s.serverURL
	url := strings.TrimSuffix(baseURL, "/") + "/efile/filings/"

	req, err := http.NewRequestWithContext(ctx, "GET", url, nil)
	if err != nil {
		return nil, fmt.Errorf("error creating request: %w", err)
	}

	if err := utils.PopulateQueryParams(ctx, req, request, nil); err != nil {
		return nil, fmt.Errorf("error populating query params: %w", err)
	}

	client := s.securityClient

	httpRes, err := client.Do(req)
	if err != nil {
		return nil, fmt.Errorf("error sending request: %w", err)
	}
	if httpRes == nil {
		return nil, fmt.Errorf("error sending request: no response")
	}
	defer httpRes.Body.Close()

	contentType := httpRes.Header.Get("Content-Type")

	res := &operations.GetEfileFilingsResponse{
		StatusCode:  httpRes.StatusCode,
		ContentType: contentType,
		RawResponse: httpRes,
	}
	switch {
	default:
		switch {
		case utils.MatchContentType(contentType, `application/json`):
			var out *shared.EFilingsPage
			if err := utils.UnmarshalJsonFromResponseBody(httpRes.Body, &out); err != nil {
				return nil, err
			}

			res.EFilingsPage = out
		}
	}

	return res, nil
}

// GetEfileReportsHouseSenate -
// Key financial data reported periodically by committees as they are reported. This feed includes summary
// information from the the House F3 reports, the presidential F3p reports and the PAC and party
// F3x reports.
//
// Generally, committees file reports on a quarterly or monthly basis, but
// some must also submit a report 12 days before primary elections. Therefore, during the primary
// season, the period covered by this file may be different for different committees. These totals
// also incorporate any changes made by committees, if any report covering the period is amended.
//
// DISCLAIMER: The field labels contained within this resource are subject to change.  We are attempting to succinctly
// label these fields while conveying clear meaning to ensure accessibility for all users.
func (s *efiling) GetEfileReportsHouseSenate(ctx context.Context, request operations.GetEfileReportsHouseSenateRequest) (*operations.GetEfileReportsHouseSenateResponse, error) {
	baseURL := s.serverURL
	url := strings.TrimSuffix(baseURL, "/") + "/efile/reports/house-senate/"

	req, err := http.NewRequestWithContext(ctx, "GET", url, nil)
	if err != nil {
		return nil, fmt.Errorf("error creating request: %w", err)
	}

	if err := utils.PopulateQueryParams(ctx, req, request, nil); err != nil {
		return nil, fmt.Errorf("error populating query params: %w", err)
	}

	client := s.securityClient

	httpRes, err := client.Do(req)
	if err != nil {
		return nil, fmt.Errorf("error sending request: %w", err)
	}
	if httpRes == nil {
		return nil, fmt.Errorf("error sending request: no response")
	}
	defer httpRes.Body.Close()

	contentType := httpRes.Header.Get("Content-Type")

	res := &operations.GetEfileReportsHouseSenateResponse{
		StatusCode:  httpRes.StatusCode,
		ContentType: contentType,
		RawResponse: httpRes,
	}
	switch {
	default:
		switch {
		case utils.MatchContentType(contentType, `application/json`):
			var out *shared.BaseF3FilingPage
			if err := utils.UnmarshalJsonFromResponseBody(httpRes.Body, &out); err != nil {
				return nil, err
			}

			res.BaseF3FilingPage = out
		}
	}

	return res, nil
}

// GetEfileReportsPacParty -
// Key financial data reported periodically by committees as they are reported. This feed includes summary
// information from the the House F3 reports, the presidential F3p reports and the PAC and party
// F3x reports.
//
// Generally, committees file reports on a quarterly or monthly basis, but
// some must also submit a report 12 days before primary elections. Therefore, during the primary
// season, the period covered by this file may be different for different committees. These totals
// also incorporate any changes made by committees, if any report covering the period is amended.
//
// DISCLAIMER: The field labels contained within this resource are subject to change.  We are attempting to succinctly
// label these fields while conveying clear meaning to ensure accessibility for all users.
func (s *efiling) GetEfileReportsPacParty(ctx context.Context, request operations.GetEfileReportsPacPartyRequest) (*operations.GetEfileReportsPacPartyResponse, error) {
	baseURL := s.serverURL
	url := strings.TrimSuffix(baseURL, "/") + "/efile/reports/pac-party/"

	req, err := http.NewRequestWithContext(ctx, "GET", url, nil)
	if err != nil {
		return nil, fmt.Errorf("error creating request: %w", err)
	}

	if err := utils.PopulateQueryParams(ctx, req, request, nil); err != nil {
		return nil, fmt.Errorf("error populating query params: %w", err)
	}

	client := s.securityClient

	httpRes, err := client.Do(req)
	if err != nil {
		return nil, fmt.Errorf("error sending request: %w", err)
	}
	if httpRes == nil {
		return nil, fmt.Errorf("error sending request: no response")
	}
	defer httpRes.Body.Close()

	contentType := httpRes.Header.Get("Content-Type")

	res := &operations.GetEfileReportsPacPartyResponse{
		StatusCode:  httpRes.StatusCode,
		ContentType: contentType,
		RawResponse: httpRes,
	}
	switch {
	default:
		switch {
		case utils.MatchContentType(contentType, `application/json`):
			var out *shared.BaseF3XFilingPage
			if err := utils.UnmarshalJsonFromResponseBody(httpRes.Body, &out); err != nil {
				return nil, err
			}

			res.BaseF3XFilingPage = out
		}
	}

	return res, nil
}

// GetEfileReportsPresidential -
// Key financial data reported periodically by committees as they are reported. This feed includes summary
// information from the the House F3 reports, the presidential F3p reports and the PAC and party
// F3x reports.
//
// Generally, committees file reports on a quarterly or monthly basis, but
// some must also submit a report 12 days before primary elections. Therefore, during the primary
// season, the period covered by this file may be different for different committees. These totals
// also incorporate any changes made by committees, if any report covering the period is amended.
//
// DISCLAIMER: The field labels contained within this resource are subject to change.  We are attempting to succinctly
// label these fields while conveying clear meaning to ensure accessibility for all users.
func (s *efiling) GetEfileReportsPresidential(ctx context.Context, request operations.GetEfileReportsPresidentialRequest) (*operations.GetEfileReportsPresidentialResponse, error) {
	baseURL := s.serverURL
	url := strings.TrimSuffix(baseURL, "/") + "/efile/reports/presidential/"

	req, err := http.NewRequestWithContext(ctx, "GET", url, nil)
	if err != nil {
		return nil, fmt.Errorf("error creating request: %w", err)
	}

	if err := utils.PopulateQueryParams(ctx, req, request, nil); err != nil {
		return nil, fmt.Errorf("error populating query params: %w", err)
	}

	client := s.securityClient

	httpRes, err := client.Do(req)
	if err != nil {
		return nil, fmt.Errorf("error sending request: %w", err)
	}
	if httpRes == nil {
		return nil, fmt.Errorf("error sending request: no response")
	}
	defer httpRes.Body.Close()

	contentType := httpRes.Header.Get("Content-Type")

	res := &operations.GetEfileReportsPresidentialResponse{
		StatusCode:  httpRes.StatusCode,
		ContentType: contentType,
		RawResponse: httpRes,
	}
	switch {
	default:
		switch {
		case utils.MatchContentType(contentType, `application/json`):
			var out *shared.BaseF3PFilingPage
			if err := utils.UnmarshalJsonFromResponseBody(httpRes.Body, &out); err != nil {
				return nil, err
			}

			res.BaseF3PFilingPage = out
		}
	}

	return res, nil
}
