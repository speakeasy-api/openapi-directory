/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import * as utils from "../internal/utils";
import * as operations from "./models/operations";
import * as shared from "./models/shared";
import { AxiosInstance, AxiosRequestConfig, AxiosResponse } from "axios";

export class FollowerReports {
  _defaultClient: AxiosInstance;
  _securityClient: AxiosInstance;
  _serverURL: string;
  _language: string;
  _sdkVersion: string;
  _genVersion: string;

  constructor(
    defaultClient: AxiosInstance,
    securityClient: AxiosInstance,
    serverURL: string,
    language: string,
    sdkVersion: string,
    genVersion: string
  ) {
    this._defaultClient = defaultClient;
    this._securityClient = securityClient;
    this._serverURL = serverURL;
    this._language = language;
    this._sdkVersion = sdkVersion;
    this._genVersion = genVersion;
  }

  /**
   * Used to create twitter follower report
   *
   * @remarks
   * This report uses the twitter followers as the audience. To create custom or tweet reports other methods must be used. Any report older than two days will be automatically regenerated upon create.
   *
   */
  getReportsTwitterCreate(
    req: operations.GetReportsTwitterCreateRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.GetReportsTwitterCreateResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.GetReportsTwitterCreateRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string = baseURL.replace(/\/$/, "") + "/reports/twitter/create/";

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const queryParams: string = utils.serializeQueryParams(req);

    const r = client.request({
      url: url + queryParams,
      method: "get",
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.GetReportsTwitterCreateResponse =
        new operations.GetReportsTwitterCreateResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 201:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.createTwitter = utils.objectToClass(
              httpRes?.data,
              shared.CreateTwitter
            );
          }
          break;
        case httpRes?.status == 400:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fourHundredError = utils.objectToClass(
              httpRes?.data,
              shared.FourHundredError
            );
          }
          break;
        case httpRes?.status == 401:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fourHundredAndOneError = utils.objectToClass(
              httpRes?.data,
              shared.FourHundredAndOneError
            );
          }
          break;
        case httpRes?.status == 403:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fourHundredAndThreeError = utils.objectToClass(
              httpRes?.data,
              shared.FourHundredAndThreeError
            );
          }
          break;
        case httpRes?.status == 500:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fiveHundredError = utils.objectToClass(
              httpRes?.data,
              shared.FiveHundredError
            );
          }
          break;
      }

      return res;
    });
  }

  /**
   * Used to create twitter follower report
   *
   * @remarks
   * This report uses the twitter followers as the audience. To create custom or tweet reports other methods must be used. Any report older than two days will be automatically regenerated upon create.
   *
   */
  postReportsTwitterCreate(
    req: operations.PostReportsTwitterCreateRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.PostReportsTwitterCreateResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.PostReportsTwitterCreateRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string = baseURL.replace(/\/$/, "") + "/reports/twitter/create/";

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const queryParams: string = utils.serializeQueryParams(req);

    const r = client.request({
      url: url + queryParams,
      method: "post",
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.PostReportsTwitterCreateResponse =
        new operations.PostReportsTwitterCreateResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 201:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.createTwitter = utils.objectToClass(
              httpRes?.data,
              shared.CreateTwitter
            );
          }
          break;
        case httpRes?.status == 400:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fourHundredError = utils.objectToClass(
              httpRes?.data,
              shared.FourHundredError
            );
          }
          break;
        case httpRes?.status == 401:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fourHundredAndOneError = utils.objectToClass(
              httpRes?.data,
              shared.FourHundredAndOneError
            );
          }
          break;
        case httpRes?.status == 403:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fourHundredAndThreeError = utils.objectToClass(
              httpRes?.data,
              shared.FourHundredAndThreeError
            );
          }
          break;
        case httpRes?.status == 500:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.fiveHundredError = utils.objectToClass(
              httpRes?.data,
              shared.FiveHundredError
            );
          }
          break;
      }

      return res;
    });
  }
}
