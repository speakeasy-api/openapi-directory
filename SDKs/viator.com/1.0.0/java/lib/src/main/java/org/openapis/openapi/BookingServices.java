/* 
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

package org.openapis.openapi;

import com.fasterxml.jackson.databind.ObjectMapper;
import java.net.http.HttpResponse;
import java.nio.charset.StandardCharsets;
import org.apache.http.NameValuePair;
import org.openapis.openapi.utils.HTTPClient;
import org.openapis.openapi.utils.HTTPRequest;
import org.openapis.openapi.utils.JSON;
import org.openapis.openapi.utils.SerializedBody;

/**
 * Booking services
 */
public class BookingServices {
	
    /**
	 * CANCEL_BOOKING_SERVERS contains the list of server urls available to the SDK.
	 */
    public static final String[] CANCEL_BOOKING_SERVERS = {
        /**
         * Sandbox server (uses test data)
         */
        "https://api.sandbox.viator.com/partner",
    };
	
    /**
	 * CANCEL_BOOKING_QUOTE_SERVERS contains the list of server urls available to the SDK.
	 */
    public static final String[] CANCEL_BOOKING_QUOTE_SERVERS = {
        /**
         * Sandbox server (uses test data)
         */
        "https://api.sandbox.viator.com/partner",
    };
	
    /**
	 * CANCELLATION_REASONS_SERVERS contains the list of server urls available to the SDK.
	 */
    public static final String[] CANCELLATION_REASONS_SERVERS = {
        /**
         * Sandbox server (uses test data)
         */
        "https://api.sandbox.viator.com/partner",
    };
	
	private HTTPClient _defaultClient;
	private HTTPClient _securityClient;
	private String _serverUrl;
	private String _language;
	private String _sdkVersion;
	private String _genVersion;

	public BookingServices(HTTPClient defaultClient, HTTPClient securityClient, String serverUrl, String language, String sdkVersion, String genVersion) {
		this._defaultClient = defaultClient;
		this._securityClient = securityClient;
		this._serverUrl = serverUrl;
		this._language = language;
		this._sdkVersion = sdkVersion;
		this._genVersion = genVersion;
	}

    /**
     * /booking/availability
     * Get the tour-grade with the lowest price that is available for a product on each day of the specified month
     * 
     * This service:
     * - returns 
     * - useful when displaying a calendar of available tours
     * - For more information, see: [Availability services](#section/Key-concepts/Availability-services)
     * - **Notes:** 
     *   - [/booking/availability/dates](#operation/bookingAvailabilityDates) provides all availability in one call and is more suitable for calendars, etc.
     * 
     *   - Availability data is limited to a period of **12 months** into the future from the present time on the production server and **6 months** on the sandbox server. 
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingAvailabilityResponse bookingAvailability(org.openapis.openapi.models.operations.BookingAvailabilityRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/availability");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingAvailabilityResponse res = new org.openapis.openapi.models.operations.BookingAvailabilityResponse() {{
            bookingAvailability200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingAvailability200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingAvailability200ApplicationJSON.class);
                res.bookingAvailability200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/availability/dates
     * Get dates on which a product is available
     * 
     * This service:
     * - retrieves all available dates for a product, excluding days it does not operate and blocked-out dates
     * - returns a multi-dimensional array of year-month -&amp;gt; days that have any availabile tour grade or traveler mix
     * - useful to present the user with a list of dates for selection on which *this* product is available for booking
     * - **Notes**: 
     * 
     *   - The user's desired traveler mix may not be eligible for booking; these details can be displayed when you retrieve its list of tour grades
     *   - Availability data is limited to a period of **12 months** into the future from the present time on the production server and **6 months** on the sandbox server. 
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingAvailabilityDatesResponse bookingAvailabilityDates(org.openapis.openapi.models.operations.BookingAvailabilityDatesRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/availability/dates");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        java.util.List<NameValuePair> queryParams = org.openapis.openapi.utils.Utils.getQueryParams(org.openapis.openapi.models.operations.BookingAvailabilityDatesQueryParams.class, request.queryParams, null);
        if (queryParams != null) {
            for (NameValuePair queryParam : queryParams) {
                req.addQueryParam(queryParam);
            }
        }
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingAvailabilityDatesResponse res = new org.openapis.openapi.models.operations.BookingAvailabilityDatesResponse() {{
            bookingAvailabilityDates200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingAvailabilityDates200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingAvailabilityDates200ApplicationJSON.class);
                res.bookingAvailabilityDates200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/availability/tourgrades
     * Get the tour grades of a product that are currently available
     * 
     * This service reports:
     * - all tour grades for the specified product, on the specified day, that are available for the specified age bands
     * - the pricing breakdown and the total depending on the travel date and traveler mix
     * 
     * **Note**: Availability data is limited to a period of **12 months** into the future from the present time on the production server and **6 months** on the sandbox server. 
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingAvailabilityTourgradesResponse bookingAvailabilityTourgrades(org.openapis.openapi.models.operations.BookingAvailabilityTourgradesRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/availability/tourgrades");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingAvailabilityTourgradesResponse res = new org.openapis.openapi.models.operations.BookingAvailabilityTourgradesResponse() {{
            bookingAvailabilityTourgrades200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingAvailabilityTourgrades200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingAvailabilityTourgrades200ApplicationJSON.class);
                res.bookingAvailabilityTourgrades200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/availability/tourgrades/pricingmatrix
     * Get a pricing matrix that includes availability and tour-grades for a product
     * 
     * Given a month, this service returns days with available tour grades only (i.e., days which have at least one tourgrade available), and the pricing matrix for that tour grade for that day.
     * 
     * - **Note**: Availability data is limited to a period of **12 months** into the future from the present time on the production server and **6 months** on the sandbox server. 
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingAvailabilityTourgradesPricingmatrixResponse bookingAvailabilityTourgradesPricingmatrix(org.openapis.openapi.models.operations.BookingAvailabilityTourgradesPricingmatrixRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/availability/tourgrades/pricingmatrix");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingAvailabilityTourgradesPricingmatrixResponse res = new org.openapis.openapi.models.operations.BookingAvailabilityTourgradesPricingmatrixResponse() {{
            bookingAvailabilityTourgradesPricingmatrix200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingAvailabilityTourgradesPricingmatrix200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingAvailabilityTourgradesPricingmatrix200ApplicationJSON.class);
                res.bookingAvailabilityTourgradesPricingmatrix200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/book
     * Make a booking
     * 
     * For more information, see: 
     * 
     *   - [Cancellation policy](#section/Key-concepts/Cancellation-policy)
     *   - [Booking concepts](#section/Key-concepts/Booking-concepts)
     *   - [Booking process flow](#section/Common-workflows-and-data-validation/Booking-process-flow)
     *   - [Making a booking](#section/Common-workflows-and-data-validation/Making-a-booking)
     *   - [Supplier communications](#section/Key-concepts/Supplier-communications)
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingBookResponse bookingBook(org.openapis.openapi.models.operations.BookingBookRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/book");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingBookResponse res = new org.openapis.openapi.models.operations.BookingBookResponse() {{
            bookingBook200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingBook200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingBook200ApplicationJSON.class);
                res.bookingBook200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/calculateprice
     * Confirm the price of a tour / activity prior to booking
     * 
     * For more information, see: [Calculating prices](#section/Common-workflows-and-data-validation/Calculating-prices)  
     * 
     * - **Note**: Availability and pricing data is limited to a period of **six months** into the future from the present time
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingCalculatepriceResponse bookingCalculateprice(org.openapis.openapi.models.operations.BookingCalculatepriceRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/calculateprice");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingCalculatepriceResponse res = new org.openapis.openapi.models.operations.BookingCalculatepriceResponse() {{
            bookingCalculateprice200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingCalculateprice200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingCalculateprice200ApplicationJSON.class);
                res.bookingCalculateprice200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/hotels
     * Get hotel pick-ups
     * Lists the hotel pickups available for either a product or a destination
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingHotelsResponse bookingHotels(org.openapis.openapi.models.operations.BookingHotelsRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/hotels");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        java.util.List<NameValuePair> queryParams = org.openapis.openapi.utils.Utils.getQueryParams(org.openapis.openapi.models.operations.BookingHotelsQueryParams.class, request.queryParams, null);
        if (queryParams != null) {
            for (NameValuePair queryParam : queryParams) {
                req.addQueryParam(queryParam);
            }
        }
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingHotelsResponse res = new org.openapis.openapi.models.operations.BookingHotelsResponse() {{
            bookingHotels200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingHotels200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingHotels200ApplicationJSON.class);
                res.bookingHotels200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/mybookings
     * Get a user's bookings with travel dates in the future. 
     * 
     * This service can also be used to check the status of a booking. 
     * 
     * **Provide either:** 
     * - A `voucherKey`, **or...** 
     * - An email address (`email`) and a booking reference (`itineraryOrItemId`) ([Booking Reference](#section/Key-concepts/Booking-references))
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingMybookingsResponse bookingMybookings(org.openapis.openapi.models.operations.BookingMybookingsRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/mybookings");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        java.util.List<NameValuePair> queryParams = org.openapis.openapi.utils.Utils.getQueryParams(org.openapis.openapi.models.operations.BookingMybookingsQueryParams.class, request.queryParams, null);
        if (queryParams != null) {
            for (NameValuePair queryParam : queryParams) {
                req.addQueryParam(queryParam);
            }
        }
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingMybookingsResponse res = new org.openapis.openapi.models.operations.BookingMybookingsResponse() {{
            bookingMybookings200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingMybookings200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingMybookings200ApplicationJSON.class);
                res.bookingMybookings200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/pastbooking
     * Get the details of a single specific past booking based on the `voucherKey` or `itemId` and email address sent in the request.
     * 
     * **Note**: this service will only return past bookings that were made with the same API key that was used to make the booking
     * 
     * **Sample query parameters**:
     * - email=apitest@viator.com&amp;amp;itemId=580669678
     * 
     * **or**
     * - voucherKey=1005851866:4af44c13ecf3f1a7d3f9ef2fc00c2257e08fa42ae20f877f3039ff9b52aba24e:580669678
     * 
     * **email**
     * - The email address passed must match the email address associated with the booking
     * 
     * **Departure details**
     * 
     * - Departure details such as the `departurePoint`, `departurePointAddress` and `departurePointDirections` is included in the response. 
     * - These fields may contain HTML escape characters such as &amp;amp;amp; and special characters that are escaped by a backslash. Ensure that these fields are parsed after receiving the response as it will cause your JSON to be invalid.
     * 
     * For more information, see: [Reviewing bookings](#section/Common-workflows-and-data-validation/Reviewing-bookings)
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingPastbookingResponse bookingPastbooking(org.openapis.openapi.models.operations.BookingPastbookingRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/pastbooking");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        java.util.List<NameValuePair> queryParams = org.openapis.openapi.utils.Utils.getQueryParams(org.openapis.openapi.models.operations.BookingPastbookingQueryParams.class, request.queryParams, null);
        if (queryParams != null) {
            for (NameValuePair queryParam : queryParams) {
                req.addQueryParam(queryParam);
            }
        }
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingPastbookingResponse res = new org.openapis.openapi.models.operations.BookingPastbookingResponse() {{
            bookingPastbooking200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingPastbooking200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingPastbooking200ApplicationJSON.class);
                res.bookingPastbooking200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/pricingmatrix
     * Get the pricing matrix for tour-grades, product age bands and pax mixes
     * 
     * For more information, see: [Get the tour-grade pricing matrix](#section/Common-workflows-and-data-validation/Get-the-tour-grade-pricing-matrix)
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingPricingmatrixResponse bookingPricingmatrix(org.openapis.openapi.models.operations.BookingPricingmatrixRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/pricingmatrix");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingPricingmatrixResponse res = new org.openapis.openapi.models.operations.BookingPricingmatrixResponse() {{
            bookingPricingmatrix200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingPricingmatrix200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingPricingmatrix200ApplicationJSON.class);
                res.bookingPricingmatrix200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/status
     * Get the booking status for multiple items based on different criteria
     * 
     * This service: 
     * - is ideally be used in software for bulk updates of pending bookings
     * - returns a maximum of 1000 bookings (narrow your search if you expect a greater number of results)
     * - will return &amp;lt;u&amp;gt;both&amp;lt;/u&amp;gt; live &amp;lt;u&amp;gt;and&amp;lt;/u&amp;gt; test bookings
     * - rate limited to &amp;lt;u&amp;gt;one request every 30 minutes&amp;lt;/u&amp;gt;
     * - For more information, see: [Get the bookiing status for multiple items](#section/Common-workflows-and-data-validation/Get-the-booking-status-for-multiple-items)
     * 
     * **Exceeding the rate limit**
     * - You will receive the following error message if you exceed the rate limit allowed for this service. Set `test` to `true` to bypass this limit:
     * ```javascript
     * {
     *     "data": null
     *     "vmid": 221002
     *     "errorMessage": ["Access allowed every 30 minutes"]
     *     "errorType": "EXCEPTION"
     *     "dateStamp": "2013-03-26T10:28:51+0000"
     *     "errorReference": 55315512721712161381352771
     *     "errorMessageText": ["Access allowed every 30 minutes"]
     *     "success": false
     *     "totalCount": 1
     *     "errorName": "PollingDeniedException"  
     * }
     * ```
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingStatusResponse bookingStatus(org.openapis.openapi.models.operations.BookingStatusRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/status");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingStatusResponse res = new org.openapis.openapi.models.operations.BookingStatusResponse() {{
            bookingStatus200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingStatus200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingStatus200ApplicationJSON.class);
                res.bookingStatus200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/status/items
     * Get brief booking statuses
     * 
     * This service is similar to [/booking/status](#operation/bookingStatus) in that it:
     * - retrieves the booking status for multiple items based on different criteria
     * - has the same request parameters as [/booking/status](#operation/bookingStatus)
     * 
     * However, it differs in that it returns a multi-item array of booking items with less detail than what would be received from [/booking/status](#operation/bookingStatus).
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingStatusItemsResponse bookingStatusItems(org.openapis.openapi.models.operations.BookingStatusItemsRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/status/items");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingStatusItemsResponse res = new org.openapis.openapi.models.operations.BookingStatusItemsResponse() {{
            bookingStatusItems200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingStatusItems200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingStatusItems200ApplicationJSON.class);
                res.bookingStatusItems200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /booking/voucher
     * Get voucher details
     * - Use this service to retrieve the voucher details of a booked item.
     * - The data returned is HTML-formatted and can be wrapped in a header and/or footer.
     * 
     * **Sample query parameters**
     * - leadLastName=Simpson test&amp;amp;itemId=580669678
     * 
     * **or** 
     * - voucherKey=1005851866:4af44c13ecf3f1a7d3f9ef2fc00c2257e08fa42ae20f877f3039ff9b52aba24e:580669678&amp;amp;fullHTML=true&amp;amp;mobileVoucher=true
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.BookingVoucherResponse bookingVoucher(org.openapis.openapi.models.operations.BookingVoucherRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/booking/voucher");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        java.util.List<NameValuePair> queryParams = org.openapis.openapi.utils.Utils.getQueryParams(org.openapis.openapi.models.operations.BookingVoucherQueryParams.class, request.queryParams, null);
        if (queryParams != null) {
            for (NameValuePair queryParam : queryParams) {
                req.addQueryParam(queryParam);
            }
        }
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.BookingVoucherResponse res = new org.openapis.openapi.models.operations.BookingVoucherResponse() {{
            bookingVoucher200ApplicationJSONObject = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.BookingVoucher200ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.BookingVoucher200ApplicationJSON.class);
                res.bookingVoucher200ApplicationJSONObject = out;
            }
        }

        return res;
    }

    /**
     * /bookings/{booking-reference}/cancel
     * Submits a cancellation request for the specified booking
     * 
     * For information on how to use this service, see: [Cancellation API workflow](#section/Common-workflows-and-data-validation/Cancellation-API-workflow)
     * 
     * **Note**: 
     * 
     *   * This service &amp;lt;u&amp;gt;requires&amp;lt;/u&amp;gt; [exp-api-key](#section/Authentication/exp-api-key) to be included as a header parameter. Please speak to your account manager if you have not yet been issued an exp-api-key.
     *   * The base URL for the server for this endpoint is different from the older endpoints described in this document. Use `https://api.sandbox.viator.com/partner/bookings/{booking-reference}/cancel`
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.CancelBookingResponse cancelBooking(org.openapis.openapi.models.operations.CancelBookingRequest request) throws Exception {
        String baseUrl = CANCEL_BOOKING_SERVERS[0];
        if (request.serverURL != null && !request.serverURL.isBlank()) {
            baseUrl = request.serverURL;
        }
        
        String url = org.openapis.openapi.utils.Utils.generateURL(org.openapis.openapi.models.operations.CancelBookingPathParams.class, baseUrl, "/bookings/{booking-reference}/cancel", request.pathParams, null);
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.CancelBookingResponse res = new org.openapis.openapi.models.operations.CancelBookingResponse() {{
            cancelBookingResponse = null;
            cancelBooking400ApplicationJSONObject = null;
            fourHundredAndOneUNAUTHORIZED = null;
            cancelBooking404ApplicationJSONObject = null;
            fourHundredAndSixNOTACCEPTABLE = null;
            fiveHundredINTERNALSERVERERROR = null;
            fiveHundredAndThreeSERVICEUNAVAILABLE = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.CancelBookingResponse out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.CancelBookingResponse.class);
                res.cancelBookingResponse = out;
            }
        }
        else if (httpRes.statusCode() == 400) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.CancelBooking400ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.CancelBooking400ApplicationJSON.class);
                res.cancelBooking400ApplicationJSONObject = out;
            }
        }
        else if (httpRes.statusCode() == 401) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FourHundredAndOneUNAUTHORIZED out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FourHundredAndOneUNAUTHORIZED.class);
                res.fourHundredAndOneUNAUTHORIZED = out;
            }
        }
        else if (httpRes.statusCode() == 404) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.operations.CancelBooking404ApplicationJSON out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.operations.CancelBooking404ApplicationJSON.class);
                res.cancelBooking404ApplicationJSONObject = out;
            }
        }
        else if (httpRes.statusCode() == 406) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FourHundredAndSixNOTACCEPTABLE out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FourHundredAndSixNOTACCEPTABLE.class);
                res.fourHundredAndSixNOTACCEPTABLE = out;
            }
        }
        else if (httpRes.statusCode() == 500) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FiveHundredINTERNALSERVERERROR out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FiveHundredINTERNALSERVERERROR.class);
                res.fiveHundredINTERNALSERVERERROR = out;
            }
        }
        else if (httpRes.statusCode() == 503) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FiveHundredAndThreeSERVICEUNAVAILABLE out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FiveHundredAndThreeSERVICEUNAVAILABLE.class);
                res.fiveHundredAndThreeSERVICEUNAVAILABLE = out;
            }
        }

        return res;
    }

    /**
     * /bookings/{booking-reference}/cancel-quote
     * Retrieves a quote for the cancellation of a booking
     * 
     * For information on how to use this service, see: [Cancellation API workflow](#section/Common-workflows-and-data-validation/Cancellation-API-workflow)
     * 
     * **Note**: 
     * 
     *   * This service &amp;lt;u&amp;gt;requires&amp;lt;/u&amp;gt; [exp-api-key](#section/Authentication/exp-api-key) to be included as a header parameter. Please speak to your account manager if you have not yet been issued an exp-api-key.
     *   * The base URL for the server for this endpoint is different from the older endpoints described in this document. Use `https://api.sandbox.viator.com/partner/bookings/{booking-reference}/cancel-quote`
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.CancelBookingQuoteResponse cancelBookingQuote(org.openapis.openapi.models.operations.CancelBookingQuoteRequest request) throws Exception {
        String baseUrl = CANCEL_BOOKING_QUOTE_SERVERS[0];
        if (request.serverURL != null && !request.serverURL.isBlank()) {
            baseUrl = request.serverURL;
        }
        
        String url = org.openapis.openapi.utils.Utils.generateURL(org.openapis.openapi.models.operations.CancelBookingQuotePathParams.class, baseUrl, "/bookings/{booking-reference}/cancel-quote", request.pathParams, null);
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.CancelBookingQuoteResponse res = new org.openapis.openapi.models.operations.CancelBookingQuoteResponse() {{
            cancelBookingQuoteResponse = null;
            fourHundredAndOneUNAUTHORIZED = null;
            fourHundredAndSixNOTACCEPTABLE = null;
            fiveHundredINTERNALSERVERERROR = null;
            fiveHundredAndThreeSERVICEUNAVAILABLE = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.CancelBookingQuoteResponse out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.CancelBookingQuoteResponse.class);
                res.cancelBookingQuoteResponse = out;
            }
        }
        else if (httpRes.statusCode() == 401) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FourHundredAndOneUNAUTHORIZED out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FourHundredAndOneUNAUTHORIZED.class);
                res.fourHundredAndOneUNAUTHORIZED = out;
            }
        }
        else if (httpRes.statusCode() == 406) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FourHundredAndSixNOTACCEPTABLE out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FourHundredAndSixNOTACCEPTABLE.class);
                res.fourHundredAndSixNOTACCEPTABLE = out;
            }
        }
        else if (httpRes.statusCode() == 500) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FiveHundredINTERNALSERVERERROR out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FiveHundredINTERNALSERVERERROR.class);
                res.fiveHundredINTERNALSERVERERROR = out;
            }
        }
        else if (httpRes.statusCode() == 503) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FiveHundredAndThreeSERVICEUNAVAILABLE out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FiveHundredAndThreeSERVICEUNAVAILABLE.class);
                res.fiveHundredAndThreeSERVICEUNAVAILABLE = out;
            }
        }

        return res;
    }

    /**
     * /bookings/cancel-reasons
     * Retrieves a dictionary of unique identification codes (`cancellationReasonCode`) and their associated natural-language descriptions (`cancellationReasonText`).
     * 
     * For information on how to use this service, see: [Cancellation API workflow](#section/Common-workflows-and-data-validation/Cancellation-API-workflow)
     * 
     * **Note**: 
     * 
     *   * This service &amp;lt;u&amp;gt;requires&amp;lt;/u&amp;gt; [exp-api-key](#section/Authentication/exp-api-key) to be included as a header parameter. Please speak to your account manager if you have not yet been issued an exp-api-key.
     *   * The base URL for the server for this endpoint is different from the older endpoints described in this document. Use `https://api.sandbox.viator.com/partner/cancel-reasons`
     * 
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.CancellationReasonsResponse cancellationReasons(org.openapis.openapi.models.operations.CancellationReasonsRequest request) throws Exception {
        String baseUrl = CANCELLATION_REASONS_SERVERS[0];
        if (request.serverURL != null && !request.serverURL.isBlank()) {
            baseUrl = request.serverURL;
        }
        
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/bookings/cancel-reasons");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        java.util.Map<String, java.util.List<String>> headers = org.openapis.openapi.utils.Utils.getHeaders(request.headers);
        if (headers != null) {
            for (java.util.Map.Entry<String, java.util.List<String>> header : headers.entrySet()) {
                for (String value : header.getValue()) {
                    req.addHeader(header.getKey(), value);
                }
            }
        }
        
        HTTPClient client = this._securityClient;
        
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.CancellationReasonsResponse res = new org.openapis.openapi.models.operations.CancellationReasonsResponse() {{
            cancellationReasonsResponses = null;
            fourHundredAndOneUNAUTHORIZED = null;
            fourHundredAndSixNOTACCEPTABLE = null;
            fiveHundredINTERNALSERVERERROR = null;
            fiveHundredAndThreeSERVICEUNAVAILABLE = null;
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.CancellationReasonsResponse[] out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.CancellationReasonsResponse[].class);
                res.cancellationReasonsResponses = out;
            }
        }
        else if (httpRes.statusCode() == 401) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FourHundredAndOneUNAUTHORIZED out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FourHundredAndOneUNAUTHORIZED.class);
                res.fourHundredAndOneUNAUTHORIZED = out;
            }
        }
        else if (httpRes.statusCode() == 406) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FourHundredAndSixNOTACCEPTABLE out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FourHundredAndSixNOTACCEPTABLE.class);
                res.fourHundredAndSixNOTACCEPTABLE = out;
            }
        }
        else if (httpRes.statusCode() == 500) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FiveHundredINTERNALSERVERERROR out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FiveHundredINTERNALSERVERERROR.class);
                res.fiveHundredINTERNALSERVERERROR = out;
            }
        }
        else if (httpRes.statusCode() == 503) {
            if (org.openapis.openapi.utils.Utils.matchContentType(contentType, "application/json")) {
                ObjectMapper mapper = JSON.getMapper();
                org.openapis.openapi.models.shared.FiveHundredAndThreeSERVICEUNAVAILABLE out = mapper.readValue(new String(httpRes.body(), StandardCharsets.UTF_8), org.openapis.openapi.models.shared.FiveHundredAndThreeSERVICEUNAVAILABLE.class);
                res.fiveHundredAndThreeSERVICEUNAVAILABLE = out;
            }
        }

        return res;
    }
}