// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"fmt"
)

// OrderChangeMessageCtEnum - Change Type - set to indicate the type of change - if null this is a delta)
type OrderChangeMessageCtEnum string

const (
	OrderChangeMessageCtEnumSubImage   OrderChangeMessageCtEnum = "SUB_IMAGE"
	OrderChangeMessageCtEnumResubDelta OrderChangeMessageCtEnum = "RESUB_DELTA"
	OrderChangeMessageCtEnumHeartbeat  OrderChangeMessageCtEnum = "HEARTBEAT"
)

func (e *OrderChangeMessageCtEnum) UnmarshalJSON(data []byte) error {
	var s string
	if err := json.Unmarshal(data, &s); err != nil {
		return err
	}
	switch s {
	case "SUB_IMAGE":
		fallthrough
	case "RESUB_DELTA":
		fallthrough
	case "HEARTBEAT":
		*e = OrderChangeMessageCtEnum(s)
		return nil
	default:
		return fmt.Errorf("invalid value for OrderChangeMessageCtEnum: %s", s)
	}
}

// OrderChangeMessageSegmentTypeEnum - Segment Type - if the change is split into multiple segments, this denotes the beginning and end of a change, and segments in between. Will be null if data is not segmented
type OrderChangeMessageSegmentTypeEnum string

const (
	OrderChangeMessageSegmentTypeEnumSegStart OrderChangeMessageSegmentTypeEnum = "SEG_START"
	OrderChangeMessageSegmentTypeEnumSeg      OrderChangeMessageSegmentTypeEnum = "SEG"
	OrderChangeMessageSegmentTypeEnumSegEnd   OrderChangeMessageSegmentTypeEnum = "SEG_END"
)

func (e *OrderChangeMessageSegmentTypeEnum) UnmarshalJSON(data []byte) error {
	var s string
	if err := json.Unmarshal(data, &s); err != nil {
		return err
	}
	switch s {
	case "SEG_START":
		fallthrough
	case "SEG":
		fallthrough
	case "SEG_END":
		*e = OrderChangeMessageSegmentTypeEnum(s)
		return nil
	default:
		return fmt.Errorf("invalid value for OrderChangeMessageSegmentTypeEnum: %s", s)
	}
}

type OrderChangeMessage struct {
	// Token value (non-null) should be stored and passed in a MarketSubscriptionMessage to resume subscription (in case of disconnect)
	Clk *string `json:"clk,omitempty"`
	// Conflate Milliseconds - the conflation rate (may differ from that requested if subscription is delayed)
	ConflateMs *int64 `json:"conflateMs,omitempty"`
	// Change Type - set to indicate the type of change - if null this is a delta)
	Ct *OrderChangeMessageCtEnum `json:"ct,omitempty"`
	// Heartbeat Milliseconds - the heartbeat rate (may differ from requested: bounds are 500 to 30000)
	HeartbeatMs *int64 `json:"heartbeatMs,omitempty"`
	// Client generated unique id to link request with response (like json rpc)
	ID *int `json:"id,omitempty"`
	// Token value (non-null) should be stored and passed in a MarketSubscriptionMessage to resume subscription (in case of disconnect)
	InitialClk *string `json:"initialClk,omitempty"`
	// OrderMarketChanges - the modifications to account's orders (will be null on a heartbeat
	Oc []OrderMarketChange `json:"oc,omitempty"`
	// The operation type
	Op *string `json:"op,omitempty"`
	// Publish Time (in millis since epoch) that the changes were generated
	Pt *int64 `json:"pt,omitempty"`
	// Segment Type - if the change is split into multiple segments, this denotes the beginning and end of a change, and segments in between. Will be null if data is not segmented
	SegmentType *OrderChangeMessageSegmentTypeEnum `json:"segmentType,omitempty"`
	// Stream status: set to null if the exchange stream data is up to date and 503 if the downstream services are experiencing latencies
	Status *int `json:"status,omitempty"`
}
