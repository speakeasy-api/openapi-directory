/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { SpeakeasyBase, SpeakeasyMetadata } from "../../../internal/utils";
import { HttpRouteCorsPolicy } from "./httproutecorspolicy";
import { HttpRouteDestination } from "./httproutedestination";
import { HttpRouteFaultInjectionPolicy } from "./httproutefaultinjectionpolicy";
import { HttpRouteHeaderModifier } from "./httprouteheadermodifier";
import { HttpRouteRedirect } from "./httprouteredirect";
import { HttpRouteRequestMirrorPolicy } from "./httprouterequestmirrorpolicy";
import { HttpRouteRetryPolicy } from "./httprouteretrypolicy";
import { HttpRouteURLRewrite } from "./httprouteurlrewrite";
import { Expose, Type } from "class-transformer";

/**
 * The specifications for routing traffic and applying associated policies.
 */
export class HttpRouteRouteAction extends SpeakeasyBase {
  /**
   * The Specification for allowing client side cross-origin requests.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "corsPolicy" })
  @Type(() => HttpRouteCorsPolicy)
  corsPolicy?: HttpRouteCorsPolicy;

  /**
   * The destination to which traffic should be forwarded.
   */
  @SpeakeasyMetadata({ elemType: HttpRouteDestination })
  @Expose({ name: "destinations" })
  @Type(() => HttpRouteDestination)
  destinations?: HttpRouteDestination[];

  /**
   * The specification for fault injection introduced into traffic to test the resiliency of clients to destination service failure. As part of fault injection, when clients send requests to a destination, delays can be introduced by client proxy on a percentage of requests before sending those requests to the destination service. Similarly requests can be aborted by client proxy for a percentage of requests.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "faultInjectionPolicy" })
  @Type(() => HttpRouteFaultInjectionPolicy)
  faultInjectionPolicy?: HttpRouteFaultInjectionPolicy;

  /**
   * The specification for redirecting traffic.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "redirect" })
  @Type(() => HttpRouteRedirect)
  redirect?: HttpRouteRedirect;

  /**
   * The specification for modifying HTTP header in HTTP request and HTTP response.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "requestHeaderModifier" })
  @Type(() => HttpRouteHeaderModifier)
  requestHeaderModifier?: HttpRouteHeaderModifier;

  /**
   * Specifies the policy on how requests are shadowed to a separate mirrored destination service. The proxy does not wait for responses from the shadow service. Prior to sending traffic to the shadow service, the host/authority header is suffixed with -shadow.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "requestMirrorPolicy" })
  @Type(() => HttpRouteRequestMirrorPolicy)
  requestMirrorPolicy?: HttpRouteRequestMirrorPolicy;

  /**
   * The specification for modifying HTTP header in HTTP request and HTTP response.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "responseHeaderModifier" })
  @Type(() => HttpRouteHeaderModifier)
  responseHeaderModifier?: HttpRouteHeaderModifier;

  /**
   * The specifications for retries.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "retryPolicy" })
  @Type(() => HttpRouteRetryPolicy)
  retryPolicy?: HttpRouteRetryPolicy;

  /**
   * Specifies the timeout for selected route. Timeout is computed from the time the request has been fully processed (i.e. end of stream) up until the response has been completely processed. Timeout includes all retries.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "timeout" })
  timeout?: string;

  /**
   * The specification for modifying the URL of the request, prior to forwarding the request to the destination.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "urlRewrite" })
  @Type(() => HttpRouteURLRewrite)
  urlRewrite?: HttpRouteURLRewrite;
}
