/* 
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

package org.openapis.openapi;

import java.net.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.openapis.openapi.utils.HTTPClient;
import org.openapis.openapi.utils.HTTPRequest;
import org.openapis.openapi.utils.SerializedBody;

/**
 * The Braze messaging API provides you with two distinct options for sending messages to your users. You can provide the message contents and configuration in the API request with the /messages/send and /messages/schedule endpoints. Alternatively, you can manage the details of your message with an API-Triggered Delivery campaign in the dashboard and just control when and to whom it is sent with the campaigns/trigger/send and campaigns/trigger/schedule endpoints. The following sections will detail the request specification for both methods.
 * 
 * The examples below contain the URL https://rest.iad-01.braze.com, but some customers will need to use a different endpoint URL, for example if you are hosted in Braze\u2019s EU data center or have a dedicated Braze installation. Your Success Manager will inform you if you should use a different endpoint URL.
 * 
 * Similarly to other campaigns, you can limit the number of times a particular user can receive a Messaging API campaign by configuring re-eligibility settings in the Braze Dashboard. Braze will not deliver API messages to users that haven\u2019t become re-eligible for the campaign regardless of how many API requests are sent.
 * 
 * 
 */
public class Messaging {
	
	private HTTPClient _defaultClient;
	private HTTPClient _securityClient;
	private String _serverUrl;
	private String _language;
	private String _sdkVersion;
	private String _genVersion;

	public Messaging(HTTPClient defaultClient, HTTPClient securityClient, String serverUrl, String language, String sdkVersion, String genVersion) {
		this._defaultClient = defaultClient;
		this._securityClient = securityClient;
		this._serverUrl = serverUrl;
		this._language = language;
		this._sdkVersion = sdkVersion;
		this._genVersion = genVersion;
	}

    /**
     * Get Upcoming Scheduled Campaigns and Canvases
     * You can view a JSON list of upcoming and scheduled Campaigns and Canvases using the following information and parameters. The endpoint will return information about scheduled Campaigns and entry Canvases between now and the designated end_time (ISO 8601 format) specified in the request. Daily, recurring messages will only appear once with their next occurrence. Results returned in this endpoint are only for Campaigns and Canvases created and scheduled in Braze.
     * 
     * ## Response
     * 
     * ```json
     * Content-Type: application/json
     * Authorization: Bearer YOUR-REST-API-KEY
     * {
     *     "scheduled_broadcasts": [
     *       # Example Canvas
     *       {
     *         "name" =&gt; String,
     *         "id" =&gt; String,
     *         "type" =&gt; "Canvas",
     *         "tags" =&gt; [String tag names],
     *         "next_send_time" =&gt; "YYYY-MM-DD HH:mm:ss" (may also include time zone if not local/intelligent delivery)
     *         "schedule_type" =&gt; one of "local_time_zones", "intelligent_delivery", or the name of your company's time zone
     *       },
     *       # Example Campaign
     *       {
     *         "name" =&gt; String,
     *         "id" =&gt; String,
     *         "type" =&gt; "Campaign",
     *         "tags" =&gt; [String tag names],
     *         "next_send_time" =&gt; "YYYY-MM-DD HH:mm:ss" (may also include time zone if not local/intelligent delivery)
     *         "schedule_type" =&gt; one of "local_time_zones", "intelligent_delivery", or the name of your company's time zone
     *       },
     *     ]
     * }
     * ```
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.GetUpcomingScheduledCampaignsAndCanvasesResponse getUpcomingScheduledCampaignsAndCanvases(org.openapis.openapi.models.operations.GetUpcomingScheduledCampaignsAndCanvasesRequest request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/messages/scheduled_broadcasts");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("GET");
        req.setURL(url);
        
        java.util.List<NameValuePair> queryParams = org.openapis.openapi.utils.Utils.getQueryParams(org.openapis.openapi.models.operations.GetUpcomingScheduledCampaignsAndCanvasesRequest.class, request, null);
        if (queryParams != null) {
            for (NameValuePair queryParam : queryParams) {
                req.addQueryParam(queryParam);
            }
        }
        
        HTTPClient client = this._defaultClient;
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.GetUpcomingScheduledCampaignsAndCanvasesResponse res = new org.openapis.openapi.models.operations.GetUpcomingScheduledCampaignsAndCanvasesResponse() {{
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
        }

        return res;
    }

    /**
     * Schedule API Triggered Canvases
     * Use this endpoint to trigger API Triggered Canvases, which are created on the Dashboard and initiated via the API. You can pass in `canvas_entry_properties` that will be templated into the messages sent by the first steps of the Canvas.
     * 
     * This endpoint allows you to schedule Canvas messages (up to 90 days in advance) via API Triggered delivery, allowing you to decide what action should trigger the message to be sent. Please note that to send messages with this endpoint, you must have a Canvas ID, created when you build a Canvas.
     * 
     * ### Request Parameters
     * 
     * | Parameter | Required | Data Type | Description |
     * | --------- | ---------| --------- | ----------- |
     * |`canvas_id`|Required|String| See canvas identifier|
     * |`send_id` | Optional | String | See send identifier |
     * |`recipients` | Optional | Array of recipient objects | See recipients object |
     * |`audience` | Optional | Connected audience object | See connected audience |
     * |`broadcast` | Optional | Boolean | See broadcast -- defaults to false on 8/31/17, must be set to true if "recipients" object is omitted |
     * | `trigger_properties` | Optional | Object | Personalization key value pairs for all users in this send; see trigger properties |
     * | `schedule` | Required | Schedule object | See schedule object |
     * 
     * ## Request Components
     * - [Canvas Identifier](https://www.braze.com/docs/api/identifier_types/)
     * - [Recipients](https://www.braze.com/docs/api/objects_filters/recipient_object/)
     * - [Connected Audience](https://www.braze.com/docs/api/objects_filters/connected_audience/)
     * - [Broadcast](https://www.braze.com/docs/api/parameters/#broadcast)
     * - [Trigger Properties](https://www.braze.com/docs/api/objects_filters/trigger_properties_object/)
     * - [Schedule Object](https://www.braze.com/docs/api/objects_filters/schedule_object/)
     * @param request the request object containing all of the parameters for the API call
     * @return the response from the API call
     * @throws Exception if the API call fails
     */
    public org.openapis.openapi.models.operations.ScheduleApiTriggeredCanvasesResponse scheduleApiTriggeredCanvases(org.openapis.openapi.models.operations.ScheduleApiTriggeredCanvasesRequestBody request) throws Exception {
        String baseUrl = this._serverUrl;
        String url = org.openapis.openapi.utils.Utils.generateURL(baseUrl, "/canvas/trigger/schedule/create");
        
        HTTPRequest req = new HTTPRequest();
        req.setMethod("POST");
        req.setURL(url);
        SerializedBody serializedRequestBody = org.openapis.openapi.utils.Utils.serializeRequestBody(request, "request", "json");
        req.setBody(serializedRequestBody);
        
        
        HTTPClient client = this._defaultClient;
        HttpResponse<byte[]> httpRes = client.send(req);

        String contentType = httpRes.headers().firstValue("Content-Type").orElse("application/octet-stream");

        org.openapis.openapi.models.operations.ScheduleApiTriggeredCanvasesResponse res = new org.openapis.openapi.models.operations.ScheduleApiTriggeredCanvasesResponse() {{
        }};
        res.statusCode = httpRes.statusCode();
        res.contentType = contentType;
        res.rawResponse = httpRes;
        
        if (httpRes.statusCode() == 200) {
        }

        return res;
    }
}