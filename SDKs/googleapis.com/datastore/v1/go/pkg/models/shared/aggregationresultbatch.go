// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"fmt"
)

// AggregationResultBatchMoreResultsEnum - The state of the query after the current batch. Only COUNT(*) aggregations are supported in the initial launch. Therefore, expected result type is limited to `NO_MORE_RESULTS`.
type AggregationResultBatchMoreResultsEnum string

const (
	AggregationResultBatchMoreResultsEnumMoreResultsTypeUnspecified AggregationResultBatchMoreResultsEnum = "MORE_RESULTS_TYPE_UNSPECIFIED"
	AggregationResultBatchMoreResultsEnumNotFinished                AggregationResultBatchMoreResultsEnum = "NOT_FINISHED"
	AggregationResultBatchMoreResultsEnumMoreResultsAfterLimit      AggregationResultBatchMoreResultsEnum = "MORE_RESULTS_AFTER_LIMIT"
	AggregationResultBatchMoreResultsEnumMoreResultsAfterCursor     AggregationResultBatchMoreResultsEnum = "MORE_RESULTS_AFTER_CURSOR"
	AggregationResultBatchMoreResultsEnumNoMoreResults              AggregationResultBatchMoreResultsEnum = "NO_MORE_RESULTS"
)

func (e AggregationResultBatchMoreResultsEnum) ToPointer() *AggregationResultBatchMoreResultsEnum {
	return &e
}

func (e *AggregationResultBatchMoreResultsEnum) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "MORE_RESULTS_TYPE_UNSPECIFIED":
		fallthrough
	case "NOT_FINISHED":
		fallthrough
	case "MORE_RESULTS_AFTER_LIMIT":
		fallthrough
	case "MORE_RESULTS_AFTER_CURSOR":
		fallthrough
	case "NO_MORE_RESULTS":
		*e = AggregationResultBatchMoreResultsEnum(v)
		return nil
	default:
		return fmt.Errorf("invalid value for AggregationResultBatchMoreResultsEnum: %v", v)
	}
}

// AggregationResultBatch - A batch of aggregation results produced by an aggregation query.
type AggregationResultBatch struct {
	// The aggregation results for this batch.
	AggregationResults []AggregationResult `json:"aggregationResults,omitempty"`
	// The state of the query after the current batch. Only COUNT(*) aggregations are supported in the initial launch. Therefore, expected result type is limited to `NO_MORE_RESULTS`.
	MoreResults *AggregationResultBatchMoreResultsEnum `json:"moreResults,omitempty"`
	// Read timestamp this batch was returned from. In a single transaction, subsequent query result batches for the same query can have a greater timestamp. Each batch's read timestamp is valid for all preceding batches.
	ReadTime *string `json:"readTime,omitempty"`
}
