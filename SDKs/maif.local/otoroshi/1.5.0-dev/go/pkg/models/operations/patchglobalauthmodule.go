// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package operations

import (
	"bytes"
	"encoding/json"
	"errors"
	"net/http"
	"openapi/pkg/models/shared"
)

type PatchGlobalAuthModuleSecurity struct {
	OtoroshiAuth shared.SchemeOtoroshiAuth `security:"scheme,type=http,subtype=basic"`
}

type PatchGlobalAuthModulePathParams struct {
	// The auth. config id
	ID string `pathParam:"style=simple,explode=false,name=id"`
}

type PatchGlobalAuthModuleRequest struct {
	PathParams PatchGlobalAuthModulePathParams
	Request    []shared.Patch `request:"mediaType=application/json"`
	Security   PatchGlobalAuthModuleSecurity
}

type PatchGlobalAuthModule200ApplicationJSONType string

const (
	PatchGlobalAuthModule200ApplicationJSONTypeLdapAuthModuleConfig      PatchGlobalAuthModule200ApplicationJSONType = "LdapAuthModuleConfig"
	PatchGlobalAuthModule200ApplicationJSONTypeInMemoryAuthModuleConfig  PatchGlobalAuthModule200ApplicationJSONType = "InMemoryAuthModuleConfig"
	PatchGlobalAuthModule200ApplicationJSONTypeGenericOauth2ModuleConfig PatchGlobalAuthModule200ApplicationJSONType = "GenericOauth2ModuleConfig"
)

type PatchGlobalAuthModule200ApplicationJSON struct {
	LdapAuthModuleConfig      *shared.LdapAuthModuleConfig
	InMemoryAuthModuleConfig  *shared.InMemoryAuthModuleConfig
	GenericOauth2ModuleConfig *shared.GenericOauth2ModuleConfig

	Type PatchGlobalAuthModule200ApplicationJSONType
}

func CreatePatchGlobalAuthModule200ApplicationJSONLdapAuthModuleConfig(ldapAuthModuleConfig shared.LdapAuthModuleConfig) PatchGlobalAuthModule200ApplicationJSON {
	typ := PatchGlobalAuthModule200ApplicationJSONTypeLdapAuthModuleConfig

	return PatchGlobalAuthModule200ApplicationJSON{
		LdapAuthModuleConfig: &ldapAuthModuleConfig,
		Type:                 typ,
	}
}

func CreatePatchGlobalAuthModule200ApplicationJSONInMemoryAuthModuleConfig(inMemoryAuthModuleConfig shared.InMemoryAuthModuleConfig) PatchGlobalAuthModule200ApplicationJSON {
	typ := PatchGlobalAuthModule200ApplicationJSONTypeInMemoryAuthModuleConfig

	return PatchGlobalAuthModule200ApplicationJSON{
		InMemoryAuthModuleConfig: &inMemoryAuthModuleConfig,
		Type:                     typ,
	}
}

func CreatePatchGlobalAuthModule200ApplicationJSONGenericOauth2ModuleConfig(genericOauth2ModuleConfig shared.GenericOauth2ModuleConfig) PatchGlobalAuthModule200ApplicationJSON {
	typ := PatchGlobalAuthModule200ApplicationJSONTypeGenericOauth2ModuleConfig

	return PatchGlobalAuthModule200ApplicationJSON{
		GenericOauth2ModuleConfig: &genericOauth2ModuleConfig,
		Type:                      typ,
	}
}

func (u *PatchGlobalAuthModule200ApplicationJSON) UnmarshalJSON(data []byte) error {
	var d *json.Decoder

	ldapAuthModuleConfig := new(shared.LdapAuthModuleConfig)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&ldapAuthModuleConfig); err == nil {
		u.LdapAuthModuleConfig = ldapAuthModuleConfig
		u.Type = PatchGlobalAuthModule200ApplicationJSONTypeLdapAuthModuleConfig
		return nil
	}

	inMemoryAuthModuleConfig := new(shared.InMemoryAuthModuleConfig)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&inMemoryAuthModuleConfig); err == nil {
		u.InMemoryAuthModuleConfig = inMemoryAuthModuleConfig
		u.Type = PatchGlobalAuthModule200ApplicationJSONTypeInMemoryAuthModuleConfig
		return nil
	}

	genericOauth2ModuleConfig := new(shared.GenericOauth2ModuleConfig)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&genericOauth2ModuleConfig); err == nil {
		u.GenericOauth2ModuleConfig = genericOauth2ModuleConfig
		u.Type = PatchGlobalAuthModule200ApplicationJSONTypeGenericOauth2ModuleConfig
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u PatchGlobalAuthModule200ApplicationJSON) MarshalJSON() ([]byte, error) {
	if u.LdapAuthModuleConfig != nil {
		return json.Marshal(u.LdapAuthModuleConfig)
	}

	if u.InMemoryAuthModuleConfig != nil {
		return json.Marshal(u.InMemoryAuthModuleConfig)
	}

	if u.GenericOauth2ModuleConfig != nil {
		return json.Marshal(u.GenericOauth2ModuleConfig)
	}

	return nil, nil
}

type PatchGlobalAuthModuleResponse struct {
	ContentType string
	StatusCode  int
	RawResponse *http.Response
	// Successful operation
	PatchGlobalAuthModule200ApplicationJSONOneOf *PatchGlobalAuthModule200ApplicationJSON
}
