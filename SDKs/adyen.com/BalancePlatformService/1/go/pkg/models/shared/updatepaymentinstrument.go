// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"bytes"
	"encoding/json"
	"errors"
	"fmt"
)

type UpdatePaymentInstrumentBankAccountType string

const (
	UpdatePaymentInstrumentBankAccountTypeIbanAccountIdentification    UpdatePaymentInstrumentBankAccountType = "IbanAccountIdentification"
	UpdatePaymentInstrumentBankAccountTypeUSLocalAccountIdentification UpdatePaymentInstrumentBankAccountType = "USLocalAccountIdentification"
)

type UpdatePaymentInstrumentBankAccount struct {
	IbanAccountIdentification    *IbanAccountIdentification
	USLocalAccountIdentification *USLocalAccountIdentification

	Type UpdatePaymentInstrumentBankAccountType
}

func CreateUpdatePaymentInstrumentBankAccountIbanAccountIdentification(ibanAccountIdentification IbanAccountIdentification) UpdatePaymentInstrumentBankAccount {
	typ := UpdatePaymentInstrumentBankAccountTypeIbanAccountIdentification

	return UpdatePaymentInstrumentBankAccount{
		IbanAccountIdentification: &ibanAccountIdentification,
		Type:                      typ,
	}
}

func CreateUpdatePaymentInstrumentBankAccountUSLocalAccountIdentification(usLocalAccountIdentification USLocalAccountIdentification) UpdatePaymentInstrumentBankAccount {
	typ := UpdatePaymentInstrumentBankAccountTypeUSLocalAccountIdentification

	return UpdatePaymentInstrumentBankAccount{
		USLocalAccountIdentification: &usLocalAccountIdentification,
		Type:                         typ,
	}
}

func (u *UpdatePaymentInstrumentBankAccount) UnmarshalJSON(data []byte) error {
	var d *json.Decoder

	ibanAccountIdentification := new(IbanAccountIdentification)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&ibanAccountIdentification); err == nil {
		u.IbanAccountIdentification = ibanAccountIdentification
		u.Type = UpdatePaymentInstrumentBankAccountTypeIbanAccountIdentification
		return nil
	}

	usLocalAccountIdentification := new(USLocalAccountIdentification)
	d = json.NewDecoder(bytes.NewReader(data))
	d.DisallowUnknownFields()
	if err := d.Decode(&usLocalAccountIdentification); err == nil {
		u.USLocalAccountIdentification = usLocalAccountIdentification
		u.Type = UpdatePaymentInstrumentBankAccountTypeUSLocalAccountIdentification
		return nil
	}

	return errors.New("could not unmarshal into supported union types")
}

func (u UpdatePaymentInstrumentBankAccount) MarshalJSON() ([]byte, error) {
	if u.IbanAccountIdentification != nil {
		return json.Marshal(u.IbanAccountIdentification)
	}

	if u.USLocalAccountIdentification != nil {
		return json.Marshal(u.USLocalAccountIdentification)
	}

	return nil, nil
}

// UpdatePaymentInstrumentStatusEnum - The status of the payment instrument. If a status is not specified when creating a payment instrument, it is set to **Active** by default. However, there can be exceptions for cards based on the `card.formFactor` and the `issuingCountryCode`. For example, when issuing physical cards in the US, the default status is **Requested**.
//
// Possible values:
//
//   - **Active**:  The payment instrument is active and can be used to make payments.
//
//   - **Requested**: The payment instrument has been requested. This state is applicable for physical cards.
//
// * **Inactive**: The payment instrument is inactive and cannot be used to make payments.
//
//   - **Suspended**: The payment instrument is temporarily suspended and cannot be used to make payments.
//
//   - **Closed**: The payment instrument is permanently closed. This action cannot be undone.
//
// * **Stolen**
//
//   - **Lost**
type UpdatePaymentInstrumentStatusEnum string

const (
	UpdatePaymentInstrumentStatusEnumActive    UpdatePaymentInstrumentStatusEnum = "Active"
	UpdatePaymentInstrumentStatusEnumClosed    UpdatePaymentInstrumentStatusEnum = "Closed"
	UpdatePaymentInstrumentStatusEnumInactive  UpdatePaymentInstrumentStatusEnum = "Inactive"
	UpdatePaymentInstrumentStatusEnumLost      UpdatePaymentInstrumentStatusEnum = "Lost"
	UpdatePaymentInstrumentStatusEnumRequested UpdatePaymentInstrumentStatusEnum = "Requested"
	UpdatePaymentInstrumentStatusEnumStolen    UpdatePaymentInstrumentStatusEnum = "Stolen"
	UpdatePaymentInstrumentStatusEnumSuspended UpdatePaymentInstrumentStatusEnum = "Suspended"
	UpdatePaymentInstrumentStatusEnumBlocked   UpdatePaymentInstrumentStatusEnum = "blocked"
	UpdatePaymentInstrumentStatusEnumDiscarded UpdatePaymentInstrumentStatusEnum = "discarded"
)

func (e UpdatePaymentInstrumentStatusEnum) ToPointer() *UpdatePaymentInstrumentStatusEnum {
	return &e
}

func (e *UpdatePaymentInstrumentStatusEnum) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "Active":
		fallthrough
	case "Closed":
		fallthrough
	case "Inactive":
		fallthrough
	case "Lost":
		fallthrough
	case "Requested":
		fallthrough
	case "Stolen":
		fallthrough
	case "Suspended":
		fallthrough
	case "blocked":
		fallthrough
	case "discarded":
		*e = UpdatePaymentInstrumentStatusEnum(v)
		return nil
	default:
		return fmt.Errorf("invalid value for UpdatePaymentInstrumentStatusEnum: %v", v)
	}
}

// UpdatePaymentInstrumentTypeEnum - Type of payment instrument.
//
// Possible value: **card**, **bankAccount**.
type UpdatePaymentInstrumentTypeEnum string

const (
	UpdatePaymentInstrumentTypeEnumBankAccount UpdatePaymentInstrumentTypeEnum = "bankAccount"
	UpdatePaymentInstrumentTypeEnumCard        UpdatePaymentInstrumentTypeEnum = "card"
)

func (e UpdatePaymentInstrumentTypeEnum) ToPointer() *UpdatePaymentInstrumentTypeEnum {
	return &e
}

func (e *UpdatePaymentInstrumentTypeEnum) UnmarshalJSON(data []byte) error {
	var v string
	if err := json.Unmarshal(data, &v); err != nil {
		return err
	}
	switch v {
	case "bankAccount":
		fallthrough
	case "card":
		*e = UpdatePaymentInstrumentTypeEnum(v)
		return nil
	default:
		return fmt.Errorf("invalid value for UpdatePaymentInstrumentTypeEnum: %v", v)
	}
}

// UpdatePaymentInstrument - OK - the request has succeeded.
type UpdatePaymentInstrument struct {
	// The unique identifier of the [balance account](https://docs.adyen.com/api-explorer/#/balanceplatform/v1/post/balanceAccounts__resParam_id) associated with the payment instrument.
	BalanceAccountID string `json:"balanceAccountId"`
	// Contains the business account details. Returned when you create a payment instrument with `type` **bankAccount**.
	BankAccount *UpdatePaymentInstrumentBankAccount `json:"bankAccount,omitempty"`
	Card        *Card                               `json:"card,omitempty"`
	// Your description for the payment instrument, maximum 300 characters.
	Description *string `json:"description,omitempty"`
	// The unique identifier of the payment instrument.
	ID string `json:"id"`
	// The two-character [ISO 3166-1 alpha-2](https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) country code where the payment instrument is issued. For example, **NL** or **US**.
	IssuingCountryCode string `json:"issuingCountryCode"`
	// The unique identifier of the [payment instrument group](https://docs.adyen.com/api-explorer/#/balanceplatform/v1/post/paymentInstrumentGroups__resParam_id) to which the payment instrument belongs.
	PaymentInstrumentGroupID *string `json:"paymentInstrumentGroupId,omitempty"`
	// Your reference for the payment instrument, maximum 150 characters.
	Reference *string `json:"reference,omitempty"`
	// The status of the payment instrument. If a status is not specified when creating a payment instrument, it is set to **Active** by default. However, there can be exceptions for cards based on the `card.formFactor` and the `issuingCountryCode`. For example, when issuing physical cards in the US, the default status is **Requested**.
	//
	// Possible values:
	//
	//  * **Active**:  The payment instrument is active and can be used to make payments.
	//
	//  * **Requested**: The payment instrument has been requested. This state is applicable for physical cards.
	//
	// * **Inactive**: The payment instrument is inactive and cannot be used to make payments.
	//
	//  * **Suspended**: The payment instrument is temporarily suspended and cannot be used to make payments.
	//
	//  * **Closed**: The payment instrument is permanently closed. This action cannot be undone.
	//
	// * **Stolen**
	//
	//  * **Lost**
	//
	//
	Status *UpdatePaymentInstrumentStatusEnum `json:"status,omitempty"`
	// Comment for the status of the payment instrument.
	StatusComment *string `json:"statusComment,omitempty"`
	// Type of payment instrument.
	//
	// Possible value: **card**, **bankAccount**.
	Type UpdatePaymentInstrumentTypeEnum `json:"type"`
}
