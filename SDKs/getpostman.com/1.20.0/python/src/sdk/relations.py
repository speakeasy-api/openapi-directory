"""Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT."""

import requests as requests_http
from . import utils
from sdk.models import operations
from typing import Optional

class Relations:
    r"""This contains requests related to relations.
    
    Relations can be of the following types: 
    - `contracttest`
    - `integrationtest`
    - `documentation`
    - `testsuite`
    - `environment`
    - `mock`
    - `monitor`
    """
    _client: requests_http.Session
    _security_client: requests_http.Session
    _server_url: str
    _language: str
    _sdk_version: str
    _gen_version: str

    def __init__(self, client: requests_http.Session, security_client: requests_http.Session, server_url: str, language: str, sdk_version: str, gen_version: str) -> None:
        self._client = client
        self._security_client = security_client
        self._server_url = server_url
        self._language = language
        self._sdk_version = sdk_version
        self._gen_version = gen_version
        
    def create_relations(self, request: operations.CreateRelationsRequest) -> operations.CreateRelationsResponse:
        r"""Create relations
        This call allows you to add existing Postman entities as new relations to an API. The request body should contain the relations to be created along with an array of entity IDs. 
        
        <table>
          <tr>
            <th>Relation</th>
            <th>Entity ID type</th>
          <tr>
          <tr>
            <td>contracttest</td>
            <td>Collection UIDs</td>
          </tr>
          <tr>
            <td>integrationtest</td>
            <td>Collection UIDs</td>
          </tr>
          <tr>
            <td>documentation</td>
            <td>Collection UIDs</td>
          </tr>
          <tr>
            <td>testsuite</td>
            <td>Collection UIDs</td>
          </tr>
          <tr>
            <td>environment</td>
            <td>Environment UIDs</td>
          </tr>
          <tr>
            <td>mock</td>
            <td>Mock IDs</td>
          </tr>
          <tr>
            <td>monitor</td>
            <td>Monitor IDs</td>
          </tr>
        </table>
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.CreateRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/relations', request)
        
        headers = {}
        req_content_type, data, form = utils.serialize_request_body(request, "request_body", 'json')
        if req_content_type not in ('multipart/form-data', 'multipart/mixed'):
            headers['content-type'] = req_content_type
        
        client = self._client
        
        http_res = client.request('POST', url, data=data, files=form, headers=headers)
        content_type = http_res.headers.get('Content-Type')

        res = operations.CreateRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.CreateRelations200ApplicationJSON])
                res.create_relations_200_application_json_object = out

        return res

    def get_contract_test_relations(self, request: operations.GetContractTestRelationsRequest) -> operations.GetContractTestRelationsResponse:
        r"""Get contract test relations
        This call fetches all the relations by type which are linked to the specified API version along with their details.
        
        The response will contain an array with key `{{relationType}}`. Each of the item will consist of all the details related each of the relation.
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetContractTestRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/contracttest', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetContractTestRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.GetContractTestRelations200ApplicationJSON])
                res.get_contract_test_relations_200_application_json_object = out

        return res

    def get_documentation_relations(self, request: operations.GetDocumentationRelationsRequest) -> operations.GetDocumentationRelationsResponse:
        r"""Get  documentation relations
        This call fetches all the relations by type which are linked to the specified API version along with their details.
        
        The response will contain an array with key `{{relationType}}`. Each of the item will consist of all the details related each of the relation.
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetDocumentationRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/documentation', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetDocumentationRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.GetDocumentationRelations200ApplicationJSON])
                res.get_documentation_relations_200_application_json_object = out

        return res

    def get_environment_relations(self, request: operations.GetEnvironmentRelationsRequest) -> operations.GetEnvironmentRelationsResponse:
        r"""Get environment relations
        This call fetches all the relations by type which are linked to the specified API version along with their details.
        
        The response will contain an array with key `{{relationType}}`. Each of the item will consist of all the details related each of the relation.
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetEnvironmentRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/environment', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetEnvironmentRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.GetEnvironmentRelations200ApplicationJSON])
                res.get_environment_relations_200_application_json_object = out

        return res

    def get_integration_test_relations(self, request: operations.GetIntegrationTestRelationsRequest) -> operations.GetIntegrationTestRelationsResponse:
        r"""Get integration test relations
        This call fetches all the relations by type which are linked to the specified API version along with their details.
        
        The response will contain an array with key `{{relationType}}`. Each of the item will consist of all the details related each of the relation.
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetIntegrationTestRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/integrationtest', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetIntegrationTestRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.GetIntegrationTestRelations200ApplicationJSON])
                res.get_integration_test_relations_200_application_json_object = out

        return res

    def get_linked_relations(self, request: operations.GetLinkedRelationsRequest) -> operations.GetLinkedRelationsResponse:
        r"""Get linked relations
        This call fetches all the relations which are linked to the specified API version along with their details.
        
        The response will contain a `relations` object which lists all the relation types which are linked to the API version. Each of the relation type will be an object which details the relations of this type. 
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetLinkedRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/relations', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetLinkedRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.GetLinkedRelations200ApplicationJSON])
                res.get_linked_relations_200_application_json_object = out

        return res

    def get_monitor_relations(self, request: operations.GetMonitorRelationsRequest) -> operations.GetMonitorRelationsResponse:
        r"""Get monitor relations
        This call fetches all the relations by type which are linked to the specified API version along with their details.
        
        The response will contain an array with key `{{relationType}}`. Each of the item will consist of all the details related each of the relation.
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetMonitorRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/monitor', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetMonitorRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.GetMonitorRelations200ApplicationJSON])
                res.get_monitor_relations_200_application_json_object = out

        return res

    def get_test_suite_relations(self, request: operations.GetTestSuiteRelationsRequest) -> operations.GetTestSuiteRelationsResponse:
        r"""Get test suite relations
        This call fetches all the relations by type which are linked to the specified API version along with their details.
        
        The response will contain an array with key `{{relationType}}`. Each of the item will consist of all the details related each of the relation.
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetTestSuiteRelationsRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/testsuite', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetTestSuiteRelationsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.GetTestSuiteRelations200ApplicationJSON])
                res.get_test_suite_relations_200_application_json_object = out

        return res

    def sync_relations_with_schema(self, request: operations.SyncRelationsWithSchemaRequest) -> operations.SyncRelationsWithSchemaResponse:
        r"""Sync relations with schema
        This call allows you to keep the relation in sync with the API schema.
        
        
        > Requires <a href=\"#authentication\">API Key</a> as `X-Api-Key` request header or `apikey` URL query parameter.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.SyncRelationsWithSchemaRequest, base_url, '/apis/{apiId}/versions/{apiVersionId}/{entityType}/{entityId}/syncWithSchema', request)
        
        
        client = self._client
        
        http_res = client.request('PUT', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.SyncRelationsWithSchemaResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.SyncRelationsWithSchema200ApplicationJSON])
                res.sync_relations_with_schema_200_application_json_object = out
        elif http_res.status_code == 400:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[operations.SyncRelationsWithSchema400ApplicationJSON])
                res.sync_relations_with_schema_400_application_json_object = out

        return res

    