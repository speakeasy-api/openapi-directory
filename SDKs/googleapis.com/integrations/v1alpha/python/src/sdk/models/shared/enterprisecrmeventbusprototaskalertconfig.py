"""Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT."""

from __future__ import annotations
import dataclasses
from ..shared import enterprisecrmeventbusprotobasealertconfigerrorenumlist as shared_enterprisecrmeventbusprotobasealertconfigerrorenumlist
from ..shared import enterprisecrmeventbusprotobasealertconfigthresholdvalue as shared_enterprisecrmeventbusprotobasealertconfigthresholdvalue
from dataclasses_json import Undefined, dataclass_json
from enum import Enum
from sdk import utils
from typing import Optional

class EnterpriseCrmEventbusProtoTaskAlertConfigMetricTypeEnum(str, Enum):
    METRIC_TYPE_UNSPECIFIED = 'METRIC_TYPE_UNSPECIFIED'
    TASK_ERROR_RATE = 'TASK_ERROR_RATE'
    TASK_WARNING_RATE = 'TASK_WARNING_RATE'
    TASK_RATE = 'TASK_RATE'
    TASK_AVERAGE_DURATION = 'TASK_AVERAGE_DURATION'
    TASK_PERCENTILE_DURATION = 'TASK_PERCENTILE_DURATION'

class EnterpriseCrmEventbusProtoTaskAlertConfigThresholdTypeEnum(str, Enum):
    r"""The threshold type for which this alert is being configured. If value falls below expected_min or exceeds expected_max, an alert will be fired."""
    UNSPECIFIED_THRESHOLD_TYPE = 'UNSPECIFIED_THRESHOLD_TYPE'
    EXPECTED_MIN = 'EXPECTED_MIN'
    EXPECTED_MAX = 'EXPECTED_MAX'


@dataclass_json(undefined=Undefined.EXCLUDE)
@dataclasses.dataclass
class EnterpriseCrmEventbusProtoTaskAlertConfig:
    r"""Message to be used to configure alerting in the {@code TaskConfig} protos for tasks in an event."""
    
    aggregation_period: Optional[str] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('aggregationPeriod'), 'exclude': lambda f: f is None }})
    r"""The period over which the metric value should be aggregated and evaluated. Format is , where integer should be a positive integer and unit should be one of (s,m,h,d,w) meaning (second, minute, hour, day, week)."""  
    alert_disabled: Optional[bool] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('alertDisabled'), 'exclude': lambda f: f is None }})
    r"""Set to false by default. When set to true, the metrics are not aggregated or pushed to Monarch for this workflow alert."""  
    alert_name: Optional[str] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('alertName'), 'exclude': lambda f: f is None }})
    r"""A name to identify this alert. This will be displayed in the alert subject. If set, this name should be unique in within the scope of the containing workflow."""  
    client_id: Optional[str] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('clientId'), 'exclude': lambda f: f is None }})
    r"""Client associated with this alert configuration. Must be a client enabled in one of the containing workflow's triggers."""  
    duration_threshold_ms: Optional[str] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('durationThresholdMs'), 'exclude': lambda f: f is None }})
    r"""Should be specified only for TASK_AVERAGE_DURATION and TASK_PERCENTILE_DURATION metrics. This member should be used to specify what duration value the metrics should exceed for the alert to trigger."""  
    error_enum_list: Optional[shared_enterprisecrmeventbusprotobasealertconfigerrorenumlist.EnterpriseCrmEventbusProtoBaseAlertConfigErrorEnumList] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('errorEnumList'), 'exclude': lambda f: f is None }})
    r"""List of error enums for alerts."""  
    metric_type: Optional[EnterpriseCrmEventbusProtoTaskAlertConfigMetricTypeEnum] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('metricType'), 'exclude': lambda f: f is None }})  
    num_aggregation_periods: Optional[int] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('numAggregationPeriods'), 'exclude': lambda f: f is None }})
    r"""For how many contiguous aggregation periods should the expected min or max be violated for the alert to be fired."""  
    only_final_attempt: Optional[bool] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('onlyFinalAttempt'), 'exclude': lambda f: f is None }})
    r"""Only count final task attempts, not retries."""  
    playbook_url: Optional[str] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('playbookUrl'), 'exclude': lambda f: f is None }})
    r"""Link to a playbook for resolving the issue that triggered this alert."""  
    threshold_type: Optional[EnterpriseCrmEventbusProtoTaskAlertConfigThresholdTypeEnum] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('thresholdType'), 'exclude': lambda f: f is None }})
    r"""The threshold type for which this alert is being configured. If value falls below expected_min or exceeds expected_max, an alert will be fired."""  
    threshold_value: Optional[shared_enterprisecrmeventbusprotobasealertconfigthresholdvalue.EnterpriseCrmEventbusProtoBaseAlertConfigThresholdValue] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('thresholdValue'), 'exclude': lambda f: f is None }})
    r"""The threshold value of the metric, above or below which the alert should be triggered. See EventAlertConfig or TaskAlertConfig for the different alert metric types in each case. For the *RATE metrics, one or both of these fields may be set. Zero is the default value and can be left at that. For *PERCENTILE_DURATION metrics, one or both of these fields may be set, and also, the duration threshold value should be specified in the threshold_duration_ms member below. For *AVERAGE_DURATION metrics, these fields should not be set at all. A different member, threshold_duration_ms, must be set in the EventAlertConfig or the TaskAlertConfig."""  
    warning_enum_list: Optional[shared_enterprisecrmeventbusprotobasealertconfigerrorenumlist.EnterpriseCrmEventbusProtoBaseAlertConfigErrorEnumList] = dataclasses.field(default=None, metadata={'dataclasses_json': { 'letter_case': utils.get_field_name('warningEnumList'), 'exclude': lambda f: f is None }})
    r"""List of error enums for alerts."""  
    