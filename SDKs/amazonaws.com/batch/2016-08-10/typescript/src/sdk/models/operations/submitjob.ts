/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { SpeakeasyBase, SpeakeasyMetadata } from "../../../internal/utils";
import * as shared from "../shared";
import { AxiosResponse } from "axios";
import { Expose, Type } from "class-transformer";

/**
 * An object that represents an Batch array job.
 */
export class SubmitJobRequestBodyArrayProperties extends SpeakeasyBase {
  @SpeakeasyMetadata()
  @Expose({ name: "size" })
  size?: number;
}

/**
 * The overrides that should be sent to a container.
 */
export class SubmitJobRequestBodyContainerOverrides extends SpeakeasyBase {
  @SpeakeasyMetadata()
  @Expose({ name: "command" })
  command?: string[];

  @SpeakeasyMetadata({ elemType: shared.KeyValuePair })
  @Expose({ name: "environment" })
  @Type(() => shared.KeyValuePair)
  environment?: shared.KeyValuePair[];

  @SpeakeasyMetadata()
  @Expose({ name: "instanceType" })
  instanceType?: string;

  @SpeakeasyMetadata()
  @Expose({ name: "memory" })
  memory?: number;

  @SpeakeasyMetadata({ elemType: shared.ResourceRequirement })
  @Expose({ name: "resourceRequirements" })
  @Type(() => shared.ResourceRequirement)
  resourceRequirements?: shared.ResourceRequirement[];

  @SpeakeasyMetadata()
  @Expose({ name: "vcpus" })
  vcpus?: number;
}

/**
 * An object that contains overrides for the Kubernetes resources of a job.
 */
export class SubmitJobRequestBodyEksPropertiesOverride extends SpeakeasyBase {
  @SpeakeasyMetadata()
  @Expose({ name: "podProperties" })
  @Type(() => shared.EksPodPropertiesOverride)
  podProperties?: shared.EksPodPropertiesOverride;
}

/**
 * <p>An object that represents any node overrides to a job definition that's used in a <a>SubmitJob</a> API operation.</p> <note> <p>This parameter isn't applicable to jobs that are running on Fargate resources. Don't provide it for these jobs. Rather, use <code>containerOverrides</code> instead.</p> </note>
 */
export class SubmitJobRequestBodyNodeOverrides extends SpeakeasyBase {
  @SpeakeasyMetadata({ elemType: shared.NodePropertyOverride })
  @Expose({ name: "nodePropertyOverrides" })
  @Type(() => shared.NodePropertyOverride)
  nodePropertyOverrides?: shared.NodePropertyOverride[];

  @SpeakeasyMetadata()
  @Expose({ name: "numNodes" })
  numNodes?: number;
}

/**
 * The retry strategy that's associated with a job. For more information, see <a href="https://docs.aws.amazon.com/batch/latest/userguide/job_retries.html">Automated job retries</a> in the <i>Batch User Guide</i>.
 */
export class SubmitJobRequestBodyRetryStrategy extends SpeakeasyBase {
  @SpeakeasyMetadata()
  @Expose({ name: "attempts" })
  attempts?: number;

  @SpeakeasyMetadata({ elemType: shared.EvaluateOnExit })
  @Expose({ name: "evaluateOnExit" })
  @Type(() => shared.EvaluateOnExit)
  evaluateOnExit?: shared.EvaluateOnExit[];
}

/**
 * An object that represents a job timeout configuration.
 */
export class SubmitJobRequestBodyTimeout extends SpeakeasyBase {
  @SpeakeasyMetadata()
  @Expose({ name: "attemptDurationSeconds" })
  attemptDurationSeconds?: number;
}

export class SubmitJobRequestBody extends SpeakeasyBase {
  /**
   * An object that represents an Batch array job.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "arrayProperties" })
  @Type(() => SubmitJobRequestBodyArrayProperties)
  arrayProperties?: SubmitJobRequestBodyArrayProperties;

  /**
   * The overrides that should be sent to a container.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "containerOverrides" })
  @Type(() => SubmitJobRequestBodyContainerOverrides)
  containerOverrides?: SubmitJobRequestBodyContainerOverrides;

  /**
   * A list of dependencies for the job. A job can depend upon a maximum of 20 jobs. You can specify a <code>SEQUENTIAL</code> type dependency without specifying a job ID for array jobs so that each child array job completes sequentially, starting at index 0. You can also specify an <code>N_TO_N</code> type dependency with a job ID for array jobs. In that case, each index child of this job must wait for the corresponding index child of each dependency to complete before it can begin.
   */
  @SpeakeasyMetadata({ elemType: shared.JobDependency })
  @Expose({ name: "dependsOn" })
  @Type(() => shared.JobDependency)
  dependsOn?: shared.JobDependency[];

  /**
   * An object that contains overrides for the Kubernetes resources of a job.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "eksPropertiesOverride" })
  @Type(() => SubmitJobRequestBodyEksPropertiesOverride)
  eksPropertiesOverride?: SubmitJobRequestBodyEksPropertiesOverride;

  /**
   * <p>The job definition used by this job. This value can be one of <code>definition-name</code>, <code>definition-name:revision</code>, or the Amazon Resource Name (ARN) for the job definition, with or without the revision (<code>arn:aws:batch:<i>region</i>:<i>account</i>:job-definition/<i>definition-name</i>:<i>revision</i> </code>, or <code>arn:aws:batch:<i>region</i>:<i>account</i>:job-definition/<i>definition-name</i> </code>).</p> <p>If the revision is not specified, then the latest active revision is used.</p>
   */
  @SpeakeasyMetadata()
  @Expose({ name: "jobDefinition" })
  jobDefinition: string;

  /**
   * The name of the job. It can be up to 128 letters long. The first character must be alphanumeric, can contain uppercase and lowercase letters, numbers, hyphens (-), and underscores (_).
   */
  @SpeakeasyMetadata()
  @Expose({ name: "jobName" })
  jobName: string;

  /**
   * The job queue where the job is submitted. You can specify either the name or the Amazon Resource Name (ARN) of the queue.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "jobQueue" })
  jobQueue: string;

  /**
   * <p>An object that represents any node overrides to a job definition that's used in a <a>SubmitJob</a> API operation.</p> <note> <p>This parameter isn't applicable to jobs that are running on Fargate resources. Don't provide it for these jobs. Rather, use <code>containerOverrides</code> instead.</p> </note>
   */
  @SpeakeasyMetadata()
  @Expose({ name: "nodeOverrides" })
  @Type(() => SubmitJobRequestBodyNodeOverrides)
  nodeOverrides?: SubmitJobRequestBodyNodeOverrides;

  /**
   * Additional parameters passed to the job that replace parameter substitution placeholders that are set in the job definition. Parameters are specified as a key and value pair mapping. Parameters in a <code>SubmitJob</code> request override any corresponding parameter defaults from the job definition.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "parameters" })
  parameters?: Record<string, string>;

  /**
   * Specifies whether to propagate the tags from the job or job definition to the corresponding Amazon ECS task. If no value is specified, the tags aren't propagated. Tags can only be propagated to the tasks during task creation. For tags with the same name, job tags are given priority over job definitions tags. If the total number of combined tags from the job and job definition is over 50, the job is moved to the <code>FAILED</code> state. When specified, this overrides the tag propagation setting in the job definition.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "propagateTags" })
  propagateTags?: boolean;

  /**
   * The retry strategy that's associated with a job. For more information, see <a href="https://docs.aws.amazon.com/batch/latest/userguide/job_retries.html">Automated job retries</a> in the <i>Batch User Guide</i>.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "retryStrategy" })
  @Type(() => SubmitJobRequestBodyRetryStrategy)
  retryStrategy?: SubmitJobRequestBodyRetryStrategy;

  /**
   * <p>The scheduling priority for the job. This only affects jobs in job queues with a fair share policy. Jobs with a higher scheduling priority are scheduled before jobs with a lower scheduling priority. This overrides any scheduling priority in the job definition.</p> <p>The minimum supported value is 0 and the maximum supported value is 9999.</p>
   */
  @SpeakeasyMetadata()
  @Expose({ name: "schedulingPriorityOverride" })
  schedulingPriorityOverride?: number;

  /**
   * The share identifier for the job. If the job queue doesn't have a scheduling policy, then this parameter must not be specified. If the job queue has a scheduling policy, then this parameter must be specified.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "shareIdentifier" })
  shareIdentifier?: string;

  /**
   * The tags that you apply to the job request to help you categorize and organize your resources. Each tag consists of a key and an optional value. For more information, see <a href="https://docs.aws.amazon.com/general/latest/gr/aws_tagging.html">Tagging Amazon Web Services Resources</a> in <i>Amazon Web Services General Reference</i>.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "tags" })
  tags?: Record<string, string>;

  /**
   * An object that represents a job timeout configuration.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "timeout" })
  @Type(() => SubmitJobRequestBodyTimeout)
  timeout?: SubmitJobRequestBodyTimeout;
}

export class SubmitJobRequest extends SpeakeasyBase {
  @SpeakeasyMetadata({ data: "request, media_type=application/json" })
  requestBody: SubmitJobRequestBody;

  @SpeakeasyMetadata({
    data: "header, style=simple;explode=false;name=X-Amz-Algorithm",
  })
  xAmzAlgorithm?: string;

  @SpeakeasyMetadata({
    data: "header, style=simple;explode=false;name=X-Amz-Content-Sha256",
  })
  xAmzContentSha256?: string;

  @SpeakeasyMetadata({
    data: "header, style=simple;explode=false;name=X-Amz-Credential",
  })
  xAmzCredential?: string;

  @SpeakeasyMetadata({
    data: "header, style=simple;explode=false;name=X-Amz-Date",
  })
  xAmzDate?: string;

  @SpeakeasyMetadata({
    data: "header, style=simple;explode=false;name=X-Amz-Security-Token",
  })
  xAmzSecurityToken?: string;

  @SpeakeasyMetadata({
    data: "header, style=simple;explode=false;name=X-Amz-Signature",
  })
  xAmzSignature?: string;

  @SpeakeasyMetadata({
    data: "header, style=simple;explode=false;name=X-Amz-SignedHeaders",
  })
  xAmzSignedHeaders?: string;
}

export class SubmitJobResponse extends SpeakeasyBase {
  /**
   * ClientException
   */
  @SpeakeasyMetadata()
  clientException?: any;

  @SpeakeasyMetadata()
  contentType: string;

  /**
   * ServerException
   */
  @SpeakeasyMetadata()
  serverException?: any;

  @SpeakeasyMetadata()
  statusCode: number;

  @SpeakeasyMetadata()
  rawResponse?: AxiosResponse;

  /**
   * Success
   */
  @SpeakeasyMetadata()
  submitJobResponse?: shared.SubmitJobResponse;
}
