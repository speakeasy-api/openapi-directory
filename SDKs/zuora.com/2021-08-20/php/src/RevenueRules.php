<?php

/**
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

declare(strict_types=1);

namespace OpenAPI\OpenAPI;

class RevenueRules 
{

	// SDK private variables namespaced with _ to avoid conflicts with API models
	private \GuzzleHttp\ClientInterface $_defaultClient;
	private \GuzzleHttp\ClientInterface $_securityClient;
	private string $_serverUrl;
	private string $_language;
	private string $_sdkVersion;
	private string $_genVersion;	

	/**
	 * @param \GuzzleHttp\ClientInterface $defaultClient
	 * @param \GuzzleHttp\ClientInterface $securityClient
	 * @param string $serverUrl
	 * @param string $language
	 * @param string $sdkVersion
	 * @param string $genVersion
	 */
	public function __construct(\GuzzleHttp\ClientInterface $defaultClient, \GuzzleHttp\ClientInterface $securityClient, string $serverUrl, string $language, string $sdkVersion, string $genVersion)
	{
		$this->_defaultClient = $defaultClient;
		$this->_securityClient = $securityClient;
		$this->_serverUrl = $serverUrl;
		$this->_language = $language;
		$this->_sdkVersion = $sdkVersion;
		$this->_genVersion = $genVersion;
	}
	
    /**
     * Retrieve a revenue automation start date
     * 
     * Describes how to get the revenue automation start date. Request and response field descriptions and sample code are provided.
     * 
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\GETRevenueAutomationStartDateRequest $request
     * @return \OpenAPI\OpenAPI\Models\Operations\GETRevenueAutomationStartDateResponse
     */
	public function getRevenueAutomationStartDate(
        \OpenAPI\OpenAPI\Models\Operations\GETRevenueAutomationStartDateRequest $request,
    ): \OpenAPI\OpenAPI\Models\Operations\GETRevenueAutomationStartDateResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/v1/settings/finance/revenue-automation-start-date');
        
        $options = ['http_errors' => false];
        $options = array_merge_recursive($options, Utils\Utils::getHeaders($request));
        
        $httpResponse = $this->_defaultClient->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\GETRevenueAutomationStartDateResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
            $response->headers = $httpResponse->getHeaders();
            
            if (Utils\Utils::matchContentType($contentType, 'application/json; charset=utf-8')) {
                $serializer = Utils\JSON::createSerializer();
                $response->getRevenueStartDateSettingType = $serializer->deserialize((string)$httpResponse->getBody(), 'OpenAPI\OpenAPI\Models\Shared\GETRevenueStartDateSettingType', 'json');
            }
        }

        return $response;
    }
	
    /**
     * Retrieve a revenue recognition rule by product rate plan charge ID
     * 
     * **Note:** This operation is only available if you have [Invoice Settlement](https://knowledgecenter.zuora.com/Billing/Billing_and_Payments/Invoice_Settlement) enabled. The Invoice Settlement feature is generally available as of Zuora Billing Release 296 (March 2021). This feature includes Unapplied Payments, Credit and Debit Memo, and Invoice Item Settlement. If you want to enable Invoice Settlement, see [Invoice Settlement Enablement and Checklist Guide](https://knowledgecenter.zuora.com/Billing/Billing_and_Payments/Invoice_Settlement/Invoice_Settlement_Migration_Checklist_and_Guide) for more information. 
     * 
     * Retrieves the revenue recognition rule associated with a production rate plan charge by specifying the charge ID.
     * 
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulebyProductRatePlanChargeRequest $request
     * @return \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulebyProductRatePlanChargeResponse
     */
	public function getRevenueRecRulebyProductRatePlanCharge(
        \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulebyProductRatePlanChargeRequest $request,
    ): \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulebyProductRatePlanChargeResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/v1/revenue-recognition-rules/product-charges/{charge-key}', \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulebyProductRatePlanChargeRequest::class, $request);
        
        $options = ['http_errors' => false];
        $options = array_merge_recursive($options, Utils\Utils::getHeaders($request));
        
        $httpResponse = $this->_defaultClient->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulebyProductRatePlanChargeResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
            $response->headers = $httpResponse->getHeaders();
            
            if (Utils\Utils::matchContentType($contentType, 'application/json; charset=utf-8')) {
                $serializer = Utils\JSON::createSerializer();
                $response->getRevenueRecognitionRuleAssociationType = $serializer->deserialize((string)$httpResponse->getBody(), 'OpenAPI\OpenAPI\Models\Shared\GETRevenueRecognitionRuleAssociationType', 'json');
            }
        }

        return $response;
    }
	
    /**
     * Retrieve a revenue recognition rule by subscription charge ID
     * 
     * Retrieves the revenue recognition rule associated with a subscription charge by specifying the charge ID. Request and response field descriptions and sample code are provided.
     * 
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulesRequest $request
     * @return \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulesResponse
     */
	public function getRevenueRecRules(
        \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulesRequest $request,
    ): \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulesResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/v1/revenue-recognition-rules/subscription-charges/{charge-key}', \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulesRequest::class, $request);
        
        $options = ['http_errors' => false];
        $options = array_merge_recursive($options, Utils\Utils::getHeaders($request));
        
        $httpResponse = $this->_defaultClient->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\GETRevenueRecRulesResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
            $response->headers = $httpResponse->getHeaders();
            
            if (Utils\Utils::matchContentType($contentType, 'application/json; charset=utf-8')) {
                $serializer = Utils\JSON::createSerializer();
                $response->getRevenueRecognitionRuleAssociationType = $serializer->deserialize((string)$httpResponse->getBody(), 'OpenAPI\OpenAPI\Models\Shared\GETRevenueRecognitionRuleAssociationType', 'json');
            }
        }

        return $response;
    }
}