"""Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT."""

import requests as requests_http
from . import utils
from sdk.models import operations, shared
from typing import Optional

class Users:
    r"""Operations about users"""
    _client: requests_http.Session
    _security_client: requests_http.Session
    _server_url: str
    _language: str
    _sdk_version: str
    _gen_version: str

    def __init__(self, client: requests_http.Session, security_client: requests_http.Session, server_url: str, language: str, sdk_version: str, gen_version: str) -> None:
        self._client = client
        self._security_client = security_client
        self._server_url = server_url
        self._language = language
        self._sdk_version = sdk_version
        self._gen_version = gen_version
        
    def delete_users_id(self, request: operations.DeleteUsersIDRequest) -> operations.DeleteUsersIDResponse:
        r"""Delete User
        Delete User
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.DeleteUsersIDRequest, base_url, '/users/{id}', request)
        
        
        client = self._client
        
        http_res = client.request('DELETE', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.DeleteUsersIDResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        

        return res

    def get_users(self, request: operations.GetUsersRequest) -> operations.GetUsersResponse:
        r"""List Users
        List Users
        """
        base_url = self._server_url
        
        url = base_url.removesuffix('/') + '/users'
        
        query_params = utils.get_query_params(operations.GetUsersRequest, request)
        
        client = self._client
        
        http_res = client.request('GET', url, params=query_params)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetUsersResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[list[shared.UserEntity]])
                res.user_entities = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def get_users_id(self, request: operations.GetUsersIDRequest) -> operations.GetUsersIDResponse:
        r"""Show User
        Show User
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetUsersIDRequest, base_url, '/users/{id}', request)
        
        
        client = self._client
        
        http_res = client.request('GET', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetUsersIDResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[shared.UserEntity])
                res.user_entity = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def get_users_user_id_api_keys(self, request: operations.GetUsersUserIDAPIKeysRequest) -> operations.GetUsersUserIDAPIKeysResponse:
        r"""List Api Keys
        List Api Keys
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetUsersUserIDAPIKeysRequest, base_url, '/users/{user_id}/api_keys', request)
        
        query_params = utils.get_query_params(operations.GetUsersUserIDAPIKeysRequest, request)
        
        client = self._client
        
        http_res = client.request('GET', url, params=query_params)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetUsersUserIDAPIKeysResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[list[shared.APIKeyEntity]])
                res.api_key_entities = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def get_users_user_id_cipher_uses(self, request: operations.GetUsersUserIDCipherUsesRequest) -> operations.GetUsersUserIDCipherUsesResponse:
        r"""List User Cipher Uses
        List User Cipher Uses
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetUsersUserIDCipherUsesRequest, base_url, '/users/{user_id}/cipher_uses', request)
        
        query_params = utils.get_query_params(operations.GetUsersUserIDCipherUsesRequest, request)
        
        client = self._client
        
        http_res = client.request('GET', url, params=query_params)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetUsersUserIDCipherUsesResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[list[shared.UserCipherUseEntity]])
                res.user_cipher_use_entities = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def get_users_user_id_groups(self, request: operations.GetUsersUserIDGroupsRequest) -> operations.GetUsersUserIDGroupsResponse:
        r"""List Group Users
        List Group Users
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetUsersUserIDGroupsRequest, base_url, '/users/{user_id}/groups', request)
        
        query_params = utils.get_query_params(operations.GetUsersUserIDGroupsRequest, request)
        
        client = self._client
        
        http_res = client.request('GET', url, params=query_params)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetUsersUserIDGroupsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[list[shared.GroupUserEntity]])
                res.group_user_entities = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def get_users_user_id_permissions(self, request: operations.GetUsersUserIDPermissionsRequest) -> operations.GetUsersUserIDPermissionsResponse:
        r"""List Permissions
        List Permissions
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetUsersUserIDPermissionsRequest, base_url, '/users/{user_id}/permissions', request)
        
        query_params = utils.get_query_params(operations.GetUsersUserIDPermissionsRequest, request)
        
        client = self._client
        
        http_res = client.request('GET', url, params=query_params)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetUsersUserIDPermissionsResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[list[shared.PermissionEntity]])
                res.permission_entities = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def get_users_user_id_public_keys(self, request: operations.GetUsersUserIDPublicKeysRequest) -> operations.GetUsersUserIDPublicKeysResponse:
        r"""List Public Keys
        List Public Keys
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.GetUsersUserIDPublicKeysRequest, base_url, '/users/{user_id}/public_keys', request)
        
        query_params = utils.get_query_params(operations.GetUsersUserIDPublicKeysRequest, request)
        
        client = self._client
        
        http_res = client.request('GET', url, params=query_params)
        content_type = http_res.headers.get('Content-Type')

        res = operations.GetUsersUserIDPublicKeysResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[list[shared.PublicKeyEntity]])
                res.public_key_entities = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def patch_users_id(self, request: operations.PatchUsersIDRequest) -> operations.PatchUsersIDResponse:
        r"""Update User
        Update User
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.PatchUsersIDRequest, base_url, '/users/{id}', request)
        
        headers = {}
        req_content_type, data, form = utils.serialize_request_body(request, "request_body", 'multipart')
        if req_content_type not in ('multipart/form-data', 'multipart/mixed'):
            headers['content-type'] = req_content_type
        
        client = self._client
        
        http_res = client.request('PATCH', url, data=data, files=form, headers=headers)
        content_type = http_res.headers.get('Content-Type')

        res = operations.PatchUsersIDResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 200:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[shared.UserEntity])
                res.user_entity = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def post_users(self, request: operations.PostUsersRequestBody) -> operations.PostUsersResponse:
        r"""Create User
        Create User
        """
        base_url = self._server_url
        
        url = base_url.removesuffix('/') + '/users'
        
        headers = {}
        req_content_type, data, form = utils.serialize_request_body(request, "request", 'multipart')
        if req_content_type not in ('multipart/form-data', 'multipart/mixed'):
            headers['content-type'] = req_content_type
        
        client = self._client
        
        http_res = client.request('POST', url, data=data, files=form, headers=headers)
        content_type = http_res.headers.get('Content-Type')

        res = operations.PostUsersResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 201:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[shared.UserEntity])
                res.user_entity = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def post_users_id2fa_reset(self, request: operations.PostUsersId2faResetRequest) -> operations.PostUsersId2faResetResponse:
        r"""Trigger 2FA Reset process for user who has lost access to their existing 2FA methods.
        Trigger 2FA Reset process for user who has lost access to their existing 2FA methods.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.PostUsersId2faResetRequest, base_url, '/users/{id}/2fa/reset', request)
        
        
        client = self._client
        
        http_res = client.request('POST', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.PostUsersId2faResetResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        

        return res

    def post_users_id_resend_welcome_email(self, request: operations.PostUsersIDResendWelcomeEmailRequest) -> operations.PostUsersIDResendWelcomeEmailResponse:
        r"""Resend user welcome email
        Resend user welcome email
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.PostUsersIDResendWelcomeEmailRequest, base_url, '/users/{id}/resend_welcome_email', request)
        
        
        client = self._client
        
        http_res = client.request('POST', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.PostUsersIDResendWelcomeEmailResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        

        return res

    def post_users_id_unlock(self, request: operations.PostUsersIDUnlockRequest) -> operations.PostUsersIDUnlockResponse:
        r"""Unlock user who has been locked out due to failed logins.
        Unlock user who has been locked out due to failed logins.
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.PostUsersIDUnlockRequest, base_url, '/users/{id}/unlock', request)
        
        
        client = self._client
        
        http_res = client.request('POST', url)
        content_type = http_res.headers.get('Content-Type')

        res = operations.PostUsersIDUnlockResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        

        return res

    def post_users_user_id_api_keys(self, request: operations.PostUsersUserIDAPIKeysRequest) -> operations.PostUsersUserIDAPIKeysResponse:
        r"""Create Api Key
        Create Api Key
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.PostUsersUserIDAPIKeysRequest, base_url, '/users/{user_id}/api_keys', request)
        
        headers = {}
        req_content_type, data, form = utils.serialize_request_body(request, "request_body", 'multipart')
        if req_content_type not in ('multipart/form-data', 'multipart/mixed'):
            headers['content-type'] = req_content_type
        
        client = self._client
        
        http_res = client.request('POST', url, data=data, files=form, headers=headers)
        content_type = http_res.headers.get('Content-Type')

        res = operations.PostUsersUserIDAPIKeysResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 201:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[shared.APIKeyEntity])
                res.api_key_entity = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    def post_users_user_id_public_keys(self, request: operations.PostUsersUserIDPublicKeysRequest) -> operations.PostUsersUserIDPublicKeysResponse:
        r"""Create Public Key
        Create Public Key
        """
        base_url = self._server_url
        
        url = utils.generate_url(operations.PostUsersUserIDPublicKeysRequest, base_url, '/users/{user_id}/public_keys', request)
        
        headers = {}
        req_content_type, data, form = utils.serialize_request_body(request, "request_body", 'multipart')
        if req_content_type not in ('multipart/form-data', 'multipart/mixed'):
            headers['content-type'] = req_content_type
        if data is None and form is None:
            raise Exception('request body is required')
        
        client = self._client
        
        http_res = client.request('POST', url, data=data, files=form, headers=headers)
        content_type = http_res.headers.get('Content-Type')

        res = operations.PostUsersUserIDPublicKeysResponse(status_code=http_res.status_code, content_type=content_type, raw_response=http_res)
        
        if http_res.status_code == 201:
            if utils.match_content_type(content_type, 'application/json'):
                out = utils.unmarshal_json(http_res.text, Optional[shared.PublicKeyEntity])
                res.public_key_entity = out
        elif http_res.status_code in [400, 401, 403, 404, 405, 409, 412, 422, 423, 429]:
            pass

        return res

    