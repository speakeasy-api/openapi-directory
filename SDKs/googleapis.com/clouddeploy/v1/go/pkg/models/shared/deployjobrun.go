// Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.

package shared

import (
	"encoding/json"
	"fmt"
)

// DeployJobRunFailureCauseEnum - Output only. The reason the deploy failed. This will always be unspecified while the deploy is in progress or if it succeeded.
type DeployJobRunFailureCauseEnum string

const (
	DeployJobRunFailureCauseEnumFailureCauseUnspecified   DeployJobRunFailureCauseEnum = "FAILURE_CAUSE_UNSPECIFIED"
	DeployJobRunFailureCauseEnumCloudBuildUnavailable     DeployJobRunFailureCauseEnum = "CLOUD_BUILD_UNAVAILABLE"
	DeployJobRunFailureCauseEnumExecutionFailed           DeployJobRunFailureCauseEnum = "EXECUTION_FAILED"
	DeployJobRunFailureCauseEnumDeadlineExceeded          DeployJobRunFailureCauseEnum = "DEADLINE_EXCEEDED"
	DeployJobRunFailureCauseEnumMissingResourcesForCanary DeployJobRunFailureCauseEnum = "MISSING_RESOURCES_FOR_CANARY"
	DeployJobRunFailureCauseEnumCloudBuildRequestFailed   DeployJobRunFailureCauseEnum = "CLOUD_BUILD_REQUEST_FAILED"
)

func (e *DeployJobRunFailureCauseEnum) UnmarshalJSON(data []byte) error {
	var s string
	if err := json.Unmarshal(data, &s); err != nil {
		return err
	}
	switch s {
	case "FAILURE_CAUSE_UNSPECIFIED":
		fallthrough
	case "CLOUD_BUILD_UNAVAILABLE":
		fallthrough
	case "EXECUTION_FAILED":
		fallthrough
	case "DEADLINE_EXCEEDED":
		fallthrough
	case "MISSING_RESOURCES_FOR_CANARY":
		fallthrough
	case "CLOUD_BUILD_REQUEST_FAILED":
		*e = DeployJobRunFailureCauseEnum(s)
		return nil
	default:
		return fmt.Errorf("invalid value for DeployJobRunFailureCauseEnum: %s", s)
	}
}

// DeployJobRun - DeployJobRun contains information specific to a deploy `JobRun`.
type DeployJobRun struct {
	// Output only. The resource name of the Cloud Build `Build` object that is used to deploy. Format is projects/{project}/locations/{location}/builds/{build}.
	Build *string `json:"build,omitempty"`
	// Output only. The reason the deploy failed. This will always be unspecified while the deploy is in progress or if it succeeded.
	FailureCause *DeployJobRunFailureCauseEnum `json:"failureCause,omitempty"`
	// Output only. Additional information about the deploy failure, if available.
	FailureMessage *string `json:"failureMessage,omitempty"`
	// DeployJobRunMetadata surfaces information associated with a `DeployJobRun` to the user.
	Metadata *DeployJobRunMetadata `json:"metadata,omitempty"`
}
