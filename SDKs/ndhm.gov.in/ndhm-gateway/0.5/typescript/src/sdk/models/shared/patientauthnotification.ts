/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import { SpeakeasyBase, SpeakeasyMetadata } from "../../../internal/utils";
import { AccessTokenValidity } from "./accesstokenvalidity";
import { PatientDemographicResponse } from "./patientdemographicresponse";
import { Expose, Transform, Type } from "class-transformer";

export enum PatientAuthNotificationAuthStatusEnum {
  Granted = "GRANTED",
  Denied = "DENIED",
}

/**
 * depending on the purpose of auth, as specified in /auth/init, the response may include the following
 *
 * @remarks
 *   1. LINK - only returns **accessToken**
 *   2. KYC - only returns **patient**
 *   3. KYC_AND_LINK - returns both **accessToken** and **patient**
 *
 */
export class PatientAuthNotificationAuth extends SpeakeasyBase {
  /**
   * access token for initialization of subsequent action.
   */
  @SpeakeasyMetadata()
  @Expose({ name: "accessToken" })
  accessToken?: string;

  @SpeakeasyMetadata()
  @Expose({ name: "patient" })
  @Type(() => PatientDemographicResponse)
  patient?: PatientDemographicResponse;

  @SpeakeasyMetadata()
  @Expose({ name: "status" })
  status: PatientAuthNotificationAuthStatusEnum;

  /**
   * transaction id for auth session
   */
  @SpeakeasyMetadata()
  @Expose({ name: "transactionId" })
  transactionId: string;

  @SpeakeasyMetadata()
  @Expose({ name: "validity" })
  @Type(() => AccessTokenValidity)
  validity?: AccessTokenValidity;
}

export class PatientAuthNotification extends SpeakeasyBase {
  /**
   * depending on the purpose of auth, as specified in /auth/init, the response may include the following
   *
   * @remarks
   *   1. LINK - only returns **accessToken**
   *   2. KYC - only returns **patient**
   *   3. KYC_AND_LINK - returns both **accessToken** and **patient**
   *
   */
  @SpeakeasyMetadata()
  @Expose({ name: "auth" })
  @Type(() => PatientAuthNotificationAuth)
  auth?: PatientAuthNotificationAuth;

  /**
   * a nonce, unique for each HTTP request
   */
  @SpeakeasyMetadata()
  @Expose({ name: "requestId" })
  requestId: string;

  /**
   * Date time format in UTC, includes miliseconds YYYY-MM-DDThh:mm:ss.vZ
   */
  @SpeakeasyMetadata()
  @Expose({ name: "timestamp" })
  @Transform(({ value }) => new Date(value), { toClassOnly: true })
  timestamp: Date;
}
