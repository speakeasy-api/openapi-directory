<?php

/**
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

declare(strict_types=1);

namespace OpenAPI\OpenAPI;

class Storage 
{

	// SDK private variables namespaced with _ to avoid conflicts with API models
	private \GuzzleHttp\ClientInterface $_defaultClient;
	private \GuzzleHttp\ClientInterface $_securityClient;
	private string $_serverUrl;
	private string $_language;
	private string $_sdkVersion;
	private string $_genVersion;	

	/**
	 * @param \GuzzleHttp\ClientInterface $defaultClient
	 * @param \GuzzleHttp\ClientInterface $securityClient
	 * @param string $serverUrl
	 * @param string $language
	 * @param string $sdkVersion
	 * @param string $genVersion
	 */
	public function __construct(\GuzzleHttp\ClientInterface $defaultClient, \GuzzleHttp\ClientInterface $securityClient, string $serverUrl, string $language, string $sdkVersion, string $genVersion)
	{
		$this->_defaultClient = $defaultClient;
		$this->_securityClient = $securityClient;
		$this->_serverUrl = $serverUrl;
		$this->_language = $language;
		$this->_sdkVersion = $sdkVersion;
		$this->_genVersion = $genVersion;
	}
	
    /**
     * Create File
     * 
     * Create a new file. The user who creates the file will automatically be assigned to read and write access unless he has passed custom values for read and write arguments.
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageCreateFileRequestBody $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageCreateFileSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageCreateFileResponse
     */
	public function storageCreateFile(
        \OpenAPI\OpenAPI\Models\Operations\StorageCreateFileRequestBody $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageCreateFileSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageCreateFileResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files');
        
        $options = ['http_errors' => false];
        $body = Utils\Utils::serializeRequestBody($request, "request", "multipart");
        $options = array_merge_recursive($options, $body);
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('POST', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageCreateFileResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 201) {
            if (Utils\Utils::matchContentType($contentType, 'application/json')) {
                $serializer = Utils\JSON::createSerializer();
                $response->file = $serializer->deserialize((string)$httpResponse->getBody(), 'OpenAPI\OpenAPI\Models\Shared\File', 'json');
            }
        }

        return $response;
    }
	
    /**
     * Delete File
     * 
     * Delete a file by its unique ID. Only users with write permissions have access to delete this resource.
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileRequest $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileResponse
     */
	public function storageDeleteFile(
        \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileRequest $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files/{fileId}', \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileRequest::class, $request);
        
        $options = ['http_errors' => false];
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('DELETE', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageDeleteFileResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 204) {
        }

        return $response;
    }
	
    /**
     * Get File
     * 
     * Get a file by its unique ID. This endpoint response returns a JSON object with the file metadata.
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFileRequest $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFileSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageGetFileResponse
     */
	public function storageGetFile(
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFileRequest $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFileSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageGetFileResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files/{fileId}', \OpenAPI\OpenAPI\Models\Operations\StorageGetFileRequest::class, $request);
        
        $options = ['http_errors' => false];
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageGetFileResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
            if (Utils\Utils::matchContentType($contentType, 'application/json')) {
                $serializer = Utils\JSON::createSerializer();
                $response->file = $serializer->deserialize((string)$httpResponse->getBody(), 'OpenAPI\OpenAPI\Models\Shared\File', 'json');
            }
        }

        return $response;
    }
	
    /**
     * Get File for Download
     * 
     * Get a file content by its unique ID. The endpoint response return with a 'Content-Disposition: attachment' header that tells the browser to start downloading the file to user downloads directory.
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadRequest $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadResponse
     */
	public function storageGetFileDownload(
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadRequest $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files/{fileId}/download', \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadRequest::class, $request);
        
        $options = ['http_errors' => false];
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageGetFileDownloadResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
        }

        return $response;
    }
	
    /**
     * Get File Preview
     * 
     * Get a file preview image. Currently, this method supports preview for image files (jpg, png, and gif), other supported formats, like pdf, docs, slides, and spreadsheets, will return the file icon image. You can also pass query string arguments for cutting and resizing your preview image.
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewRequest $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewResponse
     */
	public function storageGetFilePreview(
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewRequest $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files/{fileId}/preview', \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewRequest::class, $request);
        
        $options = ['http_errors' => false];
        $options = array_merge_recursive($options, Utils\Utils::getQueryParams(\OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewRequest::class, $request, null));
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageGetFilePreviewResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
        }

        return $response;
    }
	
    /**
     * Get File for View
     * 
     * Get a file content by its unique ID. This endpoint is similar to the download method but returns with no  'Content-Disposition: attachment' header.
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewRequest $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewResponse
     */
	public function storageGetFileView(
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewRequest $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files/{fileId}/view', \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewRequest::class, $request);
        
        $options = ['http_errors' => false];
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageGetFileViewResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
        }

        return $response;
    }
	
    /**
     * List Files
     * 
     * Get a list of all the user files. You can use the query params to filter your results. On admin mode, this endpoint will return a list of all of the project's files. [Learn more about different API modes](/docs/admin).
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageListFilesRequest $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageListFilesSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageListFilesResponse
     */
	public function storageListFiles(
        \OpenAPI\OpenAPI\Models\Operations\StorageListFilesRequest $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageListFilesSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageListFilesResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files');
        
        $options = ['http_errors' => false];
        $options = array_merge_recursive($options, Utils\Utils::getQueryParams(\OpenAPI\OpenAPI\Models\Operations\StorageListFilesRequest::class, $request, null));
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('GET', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageListFilesResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
            if (Utils\Utils::matchContentType($contentType, 'application/json')) {
                $serializer = Utils\JSON::createSerializer();
                $response->fileList = $serializer->deserialize((string)$httpResponse->getBody(), 'OpenAPI\OpenAPI\Models\Shared\FileList', 'json');
            }
        }

        return $response;
    }
	
    /**
     * Update File
     * 
     * Update a file by its unique ID. Only users with write permissions have access to update this resource.
     * 
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileRequest $request
     * @param \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileSecurity $security
     * @return \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileResponse
     */
	public function storageUpdateFile(
        \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileRequest $request,
        \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileSecurity $security,
    ): \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileResponse
    {
        $baseUrl = $this->_serverUrl;
        $url = Utils\Utils::generateUrl($baseUrl, '/storage/files/{fileId}', \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileRequest::class, $request);
        
        $options = ['http_errors' => false];
        $body = Utils\Utils::serializeRequestBody($request, "requestBody", "json");
        $options = array_merge_recursive($options, $body);
        
        $client = Utils\Utils::configureSecurityClient($this->_defaultClient, $security);
        $httpResponse = $client->request('PUT', $url, $options);
        
        $contentType = $httpResponse->getHeader('Content-Type')[0] ?? '';

        $response = new \OpenAPI\OpenAPI\Models\Operations\StorageUpdateFileResponse();
        $response->statusCode = $httpResponse->getStatusCode();
        $response->contentType = $contentType;
        $response->rawResponse = $httpResponse;
        
        if ($httpResponse->getStatusCode() === 200) {
            if (Utils\Utils::matchContentType($contentType, 'application/json')) {
                $serializer = Utils\JSON::createSerializer();
                $response->file = $serializer->deserialize((string)$httpResponse->getBody(), 'OpenAPI\OpenAPI\Models\Shared\File', 'json');
            }
        }

        return $response;
    }
}