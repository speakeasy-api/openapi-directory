/*
 * Code generated by Speakeasy (https://speakeasyapi.dev). DO NOT EDIT.
 */

import * as utils from "../internal/utils";
import * as operations from "./models/operations";
import { AxiosInstance, AxiosRequestConfig, AxiosResponse } from "axios";

export class PromotionsAndTaxes {
  _defaultClient: AxiosInstance;
  _securityClient: AxiosInstance;
  _serverURL: string;
  _language: string;
  _sdkVersion: string;
  _genVersion: string;

  constructor(
    defaultClient: AxiosInstance,
    securityClient: AxiosInstance,
    serverURL: string,
    language: string,
    sdkVersion: string,
    genVersion: string
  ) {
    this._defaultClient = defaultClient;
    this._securityClient = securityClient;
    this._serverURL = serverURL;
    this._language = language;
    this._sdkVersion = sdkVersion;
    this._genVersion = genVersion;
  }

  /**
   * Archive Promotion or Tax
   *
   * @remarks
   * Archives a Promotion or Tax by its ID.
   */
  archivePromotion(
    req: operations.ArchivePromotionRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.ArchivePromotionResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.ArchivePromotionRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string = utils.generateURL(
      baseURL,
      "/api/rnb/pvt/archive/calculatorConfiguration/{idCalculatorConfiguration}",
      req
    );

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = { ...utils.getHeadersFromRequest(req), ...config?.headers };

    const r = client.request({
      url: url,
      method: "post",
      headers: headers,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.ArchivePromotionResponse =
        new operations.ArchivePromotionResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 204:
          break;
      }

      return res;
    });
  }

  /**
   * Create or Update Promotion or Tax
   *
   * @remarks
   * Creates or updates a specific Promotion by its Promotion ID or a specific Tax by its Tax ID.
   */
  createOrUpdateCalculatorConfiguration(
    req: operations.CreateOrUpdateCalculatorConfigurationRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.CreateOrUpdateCalculatorConfigurationResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.CreateOrUpdateCalculatorConfigurationRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string =
      baseURL.replace(/\/$/, "") + "/api/rnb/pvt/calculatorconfiguration";

    let [reqBodyHeaders, reqBody]: [object, any] = [{}, {}];

    try {
      [reqBodyHeaders, reqBody] = utils.serializeRequestBody(
        req,
        "requestBody",
        "json"
      );
    } catch (e: unknown) {
      if (e instanceof Error) {
        throw new Error(`Error serializing request body, cause: ${e.message}`);
      }
    }

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = {
      ...utils.getHeadersFromRequest(req),
      ...reqBodyHeaders,
      ...config?.headers,
    };
    if (reqBody == null || Object.keys(reqBody).length === 0)
      throw new Error("request body is required");

    const r = client.request({
      url: url,
      method: "post",
      headers: headers,
      data: reqBody,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.CreateOrUpdateCalculatorConfigurationResponse =
        new operations.CreateOrUpdateCalculatorConfigurationResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 200:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.createOrUpdateCalculatorConfiguration200ApplicationJSONObject =
              utils.objectToClass(
                httpRes?.data,
                operations.CreateOrUpdateCalculatorConfiguration200ApplicationJSON
              );
          }
          break;
      }

      return res;
    });
  }

  /**
   * Get All Promotions
   *
   * @remarks
   * Retrieves all promotions from an account.
   *
   * > 📘 Onboarding guide
   * >
   * > Check the new [Promotions onboarding guide](https://developers.vtex.com/vtex-rest-api/docs/promotions-overview). We created this guide to improve the onboarding experience for developers at VTEX. It assembles all documentation on our Developer Portal about the Promotions and is organized by focusing on the developer's journey.
   *
   *
   */
  getAllBenefits(
    req: operations.GetAllBenefitsRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.GetAllBenefitsResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.GetAllBenefitsRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string =
      baseURL.replace(/\/$/, "") +
      "/api/rnb/pvt/benefits/calculatorconfiguration";

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = { ...utils.getHeadersFromRequest(req), ...config?.headers };

    const r = client.request({
      url: url,
      method: "get",
      headers: headers,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.GetAllBenefitsResponse =
        new operations.GetAllBenefitsResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 200:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.getAllBenefits200ApplicationJSONObject = utils.objectToClass(
              httpRes?.data,
              operations.GetAllBenefits200ApplicationJSON
            );
          }
          break;
      }

      return res;
    });
  }

  /**
   * Get All Taxes
   *
   * @remarks
   * Retrieves all taxes from an account.
   */
  getAllTaxes(
    req: operations.GetAllTaxesRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.GetAllTaxesResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.GetAllTaxesRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string =
      baseURL.replace(/\/$/, "") + "/api/rnb/pvt/taxes/calculatorconfiguration";

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = { ...utils.getHeadersFromRequest(req), ...config?.headers };

    const r = client.request({
      url: url,
      method: "get",
      headers: headers,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.GetAllTaxesResponse =
        new operations.GetAllTaxesResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 200:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.getAllTaxes200ApplicationJSONObject = utils.objectToClass(
              httpRes?.data,
              operations.GetAllTaxes200ApplicationJSON
            );
          }
          break;
      }

      return res;
    });
  }

  /**
   * List Archived Promotions
   *
   * @remarks
   * Lists all archived promotions.
   */
  getArchivedPromotions(
    req: operations.GetArchivedPromotionsRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.GetArchivedPromotionsResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.GetArchivedPromotionsRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string =
      baseURL.replace(/\/$/, "") +
      "/api/rnb/pvt/archive/benefits/calculatorConfiguration";

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = { ...utils.getHeadersFromRequest(req), ...config?.headers };

    const r = client.request({
      url: url,
      method: "get",
      headers: headers,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.GetArchivedPromotionsResponse =
        new operations.GetArchivedPromotionsResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 200:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.getArchivedPromotions200ApplicationJSONObject =
              utils.objectToClass(
                httpRes?.data,
                operations.GetArchivedPromotions200ApplicationJSON
              );
          }
          break;
      }

      return res;
    });
  }

  /**
   * List Archived Taxes
   *
   * @remarks
   * Lists all archived taxes.
   */
  getArchivedTaxes(
    req: operations.GetArchivedTaxesRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.GetArchivedTaxesResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.GetArchivedTaxesRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string =
      baseURL.replace(/\/$/, "") +
      "/api/rnb/pvt/archive/taxes/calculatorConfiguration";

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = { ...utils.getHeadersFromRequest(req), ...config?.headers };

    const r = client.request({
      url: url,
      method: "get",
      headers: headers,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.GetArchivedTaxesResponse =
        new operations.GetArchivedTaxesResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 200:
          if (utils.matchContentType(contentType, `application/json`)) {
            res.getArchivedTaxes200ApplicationJSONObject = utils.objectToClass(
              httpRes?.data,
              operations.GetArchivedTaxes200ApplicationJSON
            );
          }
          break;
      }

      return res;
    });
  }

  /**
   * Get Promotion or Tax by ID
   *
   * @remarks
   * Retrieves a specific promotion by its Promotion ID or a specific tax by its Tax ID.
   */
  getCalculatorConfigurationById(
    req: operations.GetCalculatorConfigurationByIdRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.GetCalculatorConfigurationByIdResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.GetCalculatorConfigurationByIdRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string = utils.generateURL(
      baseURL,
      "/api/rnb/pvt/calculatorconfiguration/{idCalculatorConfiguration}",
      req
    );

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = { ...utils.getHeadersFromRequest(req), ...config?.headers };

    const r = client.request({
      url: url,
      method: "get",
      headers: headers,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.GetCalculatorConfigurationByIdResponse =
        new operations.GetCalculatorConfigurationByIdResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 200:
          if (utils.matchContentType(contentType, `Promotion`)) {
            const resBody: string = JSON.stringify(httpRes?.data, null, 0);
            const out: Uint8Array = new Uint8Array(resBody.length);
            for (let i = 0; i < resBody.length; i++)
              out[i] = resBody.charCodeAt(i);
            res.body = out;
          }
          if (utils.matchContentType(contentType, `Tax`)) {
            const resBody: string = JSON.stringify(httpRes?.data, null, 0);
            const out: Uint8Array = new Uint8Array(resBody.length);
            for (let i = 0; i < resBody.length; i++)
              out[i] = resBody.charCodeAt(i);
            res.body = out;
          }
          break;
      }

      return res;
    });
  }

  /**
   * Unarchive Promotion or Tax
   *
   * @remarks
   * Unarchives a Promotion or Tax by its ID.
   */
  unarchivePromotion(
    req: operations.UnarchivePromotionRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.UnarchivePromotionResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.UnarchivePromotionRequest(req);
    }

    const baseURL: string = this._serverURL;
    const url: string = utils.generateURL(
      baseURL,
      "/api/rnb/pvt/unarchive/calculatorConfiguration/{idCalculatorConfiguration}",
      req
    );

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = { ...utils.getHeadersFromRequest(req), ...config?.headers };

    const r = client.request({
      url: url,
      method: "post",
      headers: headers,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.UnarchivePromotionResponse =
        new operations.UnarchivePromotionResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 204:
          break;
      }

      return res;
    });
  }

  /**
   * Create Multiple SKU Promotion
   *
   * @remarks
   * Creates a Multiple SKU Promotion. This scenario allows to create a single promotion for multiples SKUs with the Percentage Effect.
   * > ⚠️
   * >
   * > The limit of SKUs on a Multiple Effects promotion is 400.
   */
  postApiRnbPvtImportCalculatorConfiguration(
    req: operations.PostApiRnbPvtImportCalculatorConfigurationRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.PostApiRnbPvtImportCalculatorConfigurationResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req = new operations.PostApiRnbPvtImportCalculatorConfigurationRequest(
        req
      );
    }

    const baseURL: string = this._serverURL;
    const url: string =
      baseURL.replace(/\/$/, "") +
      "/api/rnb/pvt/import/calculatorConfiguration";

    let [reqBodyHeaders, reqBody]: [object, any] = [{}, {}];

    try {
      [reqBodyHeaders, reqBody] = utils.serializeRequestBody(
        req,
        "requestBody",
        "raw"
      );
    } catch (e: unknown) {
      if (e instanceof Error) {
        throw new Error(`Error serializing request body, cause: ${e.message}`);
      }
    }

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = {
      ...utils.getHeadersFromRequest(req),
      ...reqBodyHeaders,
      ...config?.headers,
    };

    const r = client.request({
      url: url,
      method: "post",
      headers: headers,
      data: reqBody,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.PostApiRnbPvtImportCalculatorConfigurationResponse =
        new operations.PostApiRnbPvtImportCalculatorConfigurationResponse({
          statusCode: httpRes.status,
          contentType: contentType,
          rawResponse: httpRes,
        });
      switch (true) {
        case httpRes?.status == 200:
          break;
      }

      return res;
    });
  }

  /**
   * Update Multiple SKU Promotion
   *
   * @remarks
   * Updates information from a Multiple SKU Promotion. This scenario allows to create a single promotion for multiples SKUs with the Percentage Effect.
   * > ⚠️
   * >
   * > The limit of SKUs on a Multiple Effects promotion is 400.
   */
  putApiRnbPvtImportCalculatorConfigurationPromotionId(
    req: operations.PutApiRnbPvtImportCalculatorConfigurationPromotionIdRequest,
    config?: AxiosRequestConfig
  ): Promise<operations.PutApiRnbPvtImportCalculatorConfigurationPromotionIdResponse> {
    if (!(req instanceof utils.SpeakeasyBase)) {
      req =
        new operations.PutApiRnbPvtImportCalculatorConfigurationPromotionIdRequest(
          req
        );
    }

    const baseURL: string = this._serverURL;
    const url: string = utils.generateURL(
      baseURL,
      "/api/rnb/pvt/import/calculatorConfiguration/{promotionId}",
      req
    );

    let [reqBodyHeaders, reqBody]: [object, any] = [{}, {}];

    try {
      [reqBodyHeaders, reqBody] = utils.serializeRequestBody(
        req,
        "requestBody",
        "raw"
      );
    } catch (e: unknown) {
      if (e instanceof Error) {
        throw new Error(`Error serializing request body, cause: ${e.message}`);
      }
    }

    const client: AxiosInstance = this._securityClient || this._defaultClient;

    const headers = {
      ...utils.getHeadersFromRequest(req),
      ...reqBodyHeaders,
      ...config?.headers,
    };

    const r = client.request({
      url: url,
      method: "put",
      headers: headers,
      data: reqBody,
      ...config,
    });

    return r.then((httpRes: AxiosResponse) => {
      const contentType: string = httpRes?.headers?.["content-type"] ?? "";

      if (httpRes?.status == null)
        throw new Error(`status code not found in response: ${httpRes}`);
      const res: operations.PutApiRnbPvtImportCalculatorConfigurationPromotionIdResponse =
        new operations.PutApiRnbPvtImportCalculatorConfigurationPromotionIdResponse(
          {
            statusCode: httpRes.status,
            contentType: contentType,
            rawResponse: httpRes,
          }
        );
      switch (true) {
        case httpRes?.status == 202:
          break;
      }

      return res;
    });
  }
}
